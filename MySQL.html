<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>MySQL</title><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 30px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding-top: 8px; padding-bottom: 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { overflow-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }
#md-notification .btn { border: 0px; }
.dropdown-menu .divider { border-color: rgb(229, 229, 229); }
.ty-preferences .window-content { background-color: rgb(250, 250, 250); }
.ty-preferences .nav-group-item.active { color: white; background: rgb(153, 153, 153); }


</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n2"><a class="md-toc-inner" style="cursor: pointer;" href="#mysql">MySQL</a></span><span class="md-toc-item md-toc-h2" data-ref="n3"><a class="md-toc-inner" style="cursor: pointer;" href="#一概述">一、概述</a></span><span class="md-toc-item md-toc-h3" data-ref="n4"><a class="md-toc-inner" style="cursor: pointer;" href="#一）数据库分类">（一）数据库分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n12"><a class="md-toc-inner" style="cursor: pointer;" href="#二）关系型数据库">（二）关系型数据库</a></span><span class="md-toc-item md-toc-h3" data-ref="n35"><a class="md-toc-inner" style="cursor: pointer;" href="#三）sql">（三）SQL</a></span><span class="md-toc-item md-toc-h3" data-ref="n66"><a class="md-toc-inner" style="cursor: pointer;" href="#四）mysql">（四）MySQL</a></span><span class="md-toc-item md-toc-h4" data-ref="n67"><a class="md-toc-inner" style="cursor: pointer;" href="#1-开启和关闭服务">1. 开启和关闭服务</a></span><span class="md-toc-item md-toc-h4" data-ref="n73"><a class="md-toc-inner" style="cursor: pointer;" href="#2-登录和退出-mysql">2. 登录和退出 MySQL</a></span><span class="md-toc-item md-toc-h4" data-ref="n86"><a class="md-toc-inner" style="cursor: pointer;" href="#3-mysql-服务端层次">3. MySQL 服务端层次</a></span><span class="md-toc-item md-toc-h4" data-ref="n96"><a class="md-toc-inner" style="cursor: pointer;" href="#4-编解码">4. 编解码</a></span><span class="md-toc-item md-toc-h4" data-ref="n151"><a class="md-toc-inner" style="cursor: pointer;" href="#5-列类型">5. 列类型</a></span><span class="md-toc-item md-toc-h5" data-ref="n152"><a class="md-toc-inner" style="cursor: pointer;" href="#51-整数类型">5.1 整数类型</a></span><span class="md-toc-item md-toc-h5" data-ref="n172"><a class="md-toc-inner" style="cursor: pointer;" href="#52-浮点类型">5.2 浮点类型</a></span><span class="md-toc-item md-toc-h5" data-ref="n222"><a class="md-toc-inner" style="cursor: pointer;" href="#53-时间日期类型">5.3 时间日期类型</a></span><span class="md-toc-item md-toc-h5" data-ref="n289"><a class="md-toc-inner" style="cursor: pointer;" href="#54-字符串类型">5.4 字符串类型</a></span><span class="md-toc-item md-toc-h4" data-ref="n441"><a class="md-toc-inner" style="cursor: pointer;" href="#6-列属性">6. 列属性</a></span><span class="md-toc-item md-toc-h5" data-ref="n457"><a class="md-toc-inner" style="cursor: pointer;" href="#61-null">6.1 NULL</a></span><span class="md-toc-item md-toc-h5" data-ref="n465"><a class="md-toc-inner" style="cursor: pointer;" href="#62-default">6.2 DEFAULT</a></span><span class="md-toc-item md-toc-h5" data-ref="n473"><a class="md-toc-inner" style="cursor: pointer;" href="#63-comment">6.3 COMMENT</a></span><span class="md-toc-item md-toc-h5" data-ref="n479"><a class="md-toc-inner" style="cursor: pointer;" href="#64-primary-key">6.4 PRIMARY KEY</a></span><span class="md-toc-item md-toc-h5" data-ref="n519"><a class="md-toc-inner" style="cursor: pointer;" href="#65-autoincrement">6.5 AUTO_INCREMENT</a></span><span class="md-toc-item md-toc-h5" data-ref="n551"><a class="md-toc-inner" style="cursor: pointer;" href="#66-unique-key">6.6 UNIQUE KEY</a></span><span class="md-toc-item md-toc-h4" data-ref="n573"><a class="md-toc-inner" style="cursor: pointer;" href="#7-表关系">7. 表关系</a></span><span class="md-toc-item md-toc-h5" data-ref="n575"><a class="md-toc-inner" style="cursor: pointer;" href="#71-一对一">7.1 一对一</a></span><span class="md-toc-item md-toc-h5" data-ref="n603"><a class="md-toc-inner" style="cursor: pointer;" href="#72-一对多">7.2 一对多</a></span><span class="md-toc-item md-toc-h5" data-ref="n639"><a class="md-toc-inner" style="cursor: pointer;" href="#73-多对多">7.3 多对多</a></span><span class="md-toc-item md-toc-h4" data-ref="n700"><a class="md-toc-inner" style="cursor: pointer;" href="#8-其他">8. 其他</a></span><span class="md-toc-item md-toc-h2" data-ref="n715"><a class="md-toc-inner" style="cursor: pointer;" href="#二操作">二、操作</a></span><span class="md-toc-item md-toc-h3" data-ref="n716"><a class="md-toc-inner" style="cursor: pointer;" href="#一）数据库操作">（一）数据库操作</a></span><span class="md-toc-item md-toc-h4" data-ref="n717"><a class="md-toc-inner" style="cursor: pointer;" href="#1-创建">1. 创建</a></span><span class="md-toc-item md-toc-h4" data-ref="n732"><a class="md-toc-inner" style="cursor: pointer;" href="#2-查看">2. 查看</a></span><span class="md-toc-item md-toc-h4" data-ref="n763"><a class="md-toc-inner" style="cursor: pointer;" href="#3-选择">3. 选择</a></span><span class="md-toc-item md-toc-h4" data-ref="n767"><a class="md-toc-inner" style="cursor: pointer;" href="#4-修改">4. 修改</a></span><span class="md-toc-item md-toc-h4" data-ref="n771"><a class="md-toc-inner" style="cursor: pointer;" href="#5-删除">5. 删除</a></span><span class="md-toc-item md-toc-h3" data-ref="n774"><a class="md-toc-inner" style="cursor: pointer;" href="#二）数据表">（二）数据表</a></span><span class="md-toc-item md-toc-h4" data-ref="n775"><a class="md-toc-inner" style="cursor: pointer;" href="#1-创建">1. 创建</a></span><span class="md-toc-item md-toc-h4" data-ref="n792"><a class="md-toc-inner" style="cursor: pointer;" href="#2-查看">2. 查看</a></span><span class="md-toc-item md-toc-h4" data-ref="n836"><a class="md-toc-inner" style="cursor: pointer;" href="#3-修改">3. 修改</a></span><span class="md-toc-item md-toc-h4" data-ref="n859"><a class="md-toc-inner" style="cursor: pointer;" href="#4-删除">4. 删除</a></span><span class="md-toc-item md-toc-h3" data-ref="n862"><a class="md-toc-inner" style="cursor: pointer;" href="#三）数据">（三）数据</a></span><span class="md-toc-item md-toc-h4" data-ref="n863"><a class="md-toc-inner" style="cursor: pointer;" href="#1-插入">1. 插入</a></span><span class="md-toc-item md-toc-h4" data-ref="n871"><a class="md-toc-inner" style="cursor: pointer;" href="#2-查询">2. 查询</a></span><span class="md-toc-item md-toc-h4" data-ref="n883"><a class="md-toc-inner" style="cursor: pointer;" href="#3-删除">3. 删除</a></span><span class="md-toc-item md-toc-h4" data-ref="n887"><a class="md-toc-inner" style="cursor: pointer;" href="#4-修改">4. 修改</a></span><span class="md-toc-item md-toc-h2" data-ref="n892"><a class="md-toc-inner" style="cursor: pointer;" href="#三高级操作">三、高级操作</a></span><span class="md-toc-item md-toc-h3" data-ref="n893"><a class="md-toc-inner" style="cursor: pointer;" href="#一）新增数据">（一）新增数据</a></span><span class="md-toc-item md-toc-h4" data-ref="n894"><a class="md-toc-inner" style="cursor: pointer;" href="#1-多数据插入">1. 多数据插入</a></span><span class="md-toc-item md-toc-h4" data-ref="n897"><a class="md-toc-inner" style="cursor: pointer;" href="#2-主键冲突">2. 主键冲突</a></span><span class="md-toc-item md-toc-h5" data-ref="n900"><a class="md-toc-inner" style="cursor: pointer;" href="#21-主键冲突更新">2.1 主键冲突更新</a></span><span class="md-toc-item md-toc-h5" data-ref="n905"><a class="md-toc-inner" style="cursor: pointer;" href="#22-主键冲突替换">2.2 主键冲突替换</a></span><span class="md-toc-item md-toc-h4" data-ref="n909"><a class="md-toc-inner" style="cursor: pointer;" href="#3-蠕虫复制">3. 蠕虫复制</a></span><span class="md-toc-item md-toc-h3" data-ref="n916"><a class="md-toc-inner" style="cursor: pointer;" href="#二）更新数据">（二）更新数据</a></span><span class="md-toc-item md-toc-h3" data-ref="n920"><a class="md-toc-inner" style="cursor: pointer;" href="#三）删除数据">（三）删除数据</a></span><span class="md-toc-item md-toc-h3" data-ref="n926"><a class="md-toc-inner" style="cursor: pointer;" href="#四）高级查询">（四）高级查询</a></span><span class="md-toc-item md-toc-h4" data-ref="n930"><a class="md-toc-inner" style="cursor: pointer;" href="#1-select-选项">1. select 选项</a></span><span class="md-toc-item md-toc-h4" data-ref="n934"><a class="md-toc-inner" style="cursor: pointer;" href="#2-字段列表">2. 字段列表</a></span><span class="md-toc-item md-toc-h4" data-ref="n938"><a class="md-toc-inner" style="cursor: pointer;" href="#3-数据源">3. 数据源</a></span><span class="md-toc-item md-toc-h5" data-ref="n940"><a class="md-toc-inner" style="cursor: pointer;" href="#31-单表">3.1 单表</a></span><span class="md-toc-item md-toc-h5" data-ref="n942"><a class="md-toc-inner" style="cursor: pointer;" href="#32-多表">3.2 多表</a></span><span class="md-toc-item md-toc-h5" data-ref="n960"><a class="md-toc-inner" style="cursor: pointer;" href="#33-动态数据">3.3 动态数据</a></span><span class="md-toc-item md-toc-h4" data-ref="n964"><a class="md-toc-inner" style="cursor: pointer;" href="#4-where-条件">4. where 条件</a></span><span class="md-toc-item md-toc-h4" data-ref="n968"><a class="md-toc-inner" style="cursor: pointer;" href="#5-group-by-条件">5. group by 条件</a></span><span class="md-toc-item md-toc-h5" data-ref="n986"><a class="md-toc-inner" style="cursor: pointer;" href="#51-分组统计">5.1 分组统计</a></span><span class="md-toc-item md-toc-h5" data-ref="n989"><a class="md-toc-inner" style="cursor: pointer;" href="#52-多分组">5.2 多分组</a></span><span class="md-toc-item md-toc-h5" data-ref="n993"><a class="md-toc-inner" style="cursor: pointer;" href="#53-分组排序">5.3 分组排序</a></span><span class="md-toc-item md-toc-h5" data-ref="n997"><a class="md-toc-inner" style="cursor: pointer;" href="#54-回溯统计">5.4 回溯统计</a></span><span class="md-toc-item md-toc-h4" data-ref="n1001"><a class="md-toc-inner" style="cursor: pointer;" href="#6-having-条件">6. having 条件</a></span><span class="md-toc-item md-toc-h4" data-ref="n1012"><a class="md-toc-inner" style="cursor: pointer;" href="#7-order-by-排序">7. order by 排序</a></span><span class="md-toc-item md-toc-h4" data-ref="n1019"><a class="md-toc-inner" style="cursor: pointer;" href="#8-limit-限制">8. limit 限制</a></span><span class="md-toc-item md-toc-h5" data-ref="n1021"><a class="md-toc-inner" style="cursor: pointer;" href="#81-记录数限制">8.1 记录数限制</a></span><span class="md-toc-item md-toc-h5" data-ref="n1024"><a class="md-toc-inner" style="cursor: pointer;" href="#82-分页">8.2 分页</a></span><span class="md-toc-item md-toc-h3" data-ref="n1030"><a class="md-toc-inner" style="cursor: pointer;" href="#五）联合查询">（五）联合查询</a></span><span class="md-toc-item md-toc-h3" data-ref="n1048"><a class="md-toc-inner" style="cursor: pointer;" href="#六）连接查询">（六）连接查询</a></span><span class="md-toc-item md-toc-h4" data-ref="n1066"><a class="md-toc-inner" style="cursor: pointer;" href="#1-交叉连接">1. 交叉连接</a></span><span class="md-toc-item md-toc-h4" data-ref="n1069"><a class="md-toc-inner" style="cursor: pointer;" href="#2-内连接">2. 内连接</a></span><span class="md-toc-item md-toc-h4" data-ref="n1079"><a class="md-toc-inner" style="cursor: pointer;" href="#3-外连接">3. 外连接</a></span><span class="md-toc-item md-toc-h4" data-ref="n1096"><a class="md-toc-inner" style="cursor: pointer;" href="#4-using">4. using</a></span><span class="md-toc-item md-toc-h3" data-ref="n1100"><a class="md-toc-inner" style="cursor: pointer;" href="#七）子查询">（七）子查询</a></span><span class="md-toc-item md-toc-h3" data-ref="n1122"><a class="md-toc-inner" style="cursor: pointer;" href="#八）数据备份与还原">（八）数据备份与还原</a></span><span class="md-toc-item md-toc-h3" data-ref="n1123"><a class="md-toc-inner" style="cursor: pointer;" href="#九）用户">（九）用户</a></span><span class="md-toc-item md-toc-h4" data-ref="n1128"><a class="md-toc-inner" style="cursor: pointer;" href="#1-增加">1. 增加</a></span><span class="md-toc-item md-toc-h4" data-ref="n1138"><a class="md-toc-inner" style="cursor: pointer;" href="#2-删除">2. 删除</a></span><span class="md-toc-item md-toc-h4" data-ref="n1140"><a class="md-toc-inner" style="cursor: pointer;" href="#3-修改">3. 修改</a></span><span class="md-toc-item md-toc-h3" data-ref="n1148"><a class="md-toc-inner" style="cursor: pointer;" href="#十）权限">（十）权限</a></span><span class="md-toc-item md-toc-h4" data-ref="n1231"><a class="md-toc-inner" style="cursor: pointer;" href="#1-授予">1. 授予</a></span><span class="md-toc-item md-toc-h4" data-ref="n1240"><a class="md-toc-inner" style="cursor: pointer;" href="#2-取消">2. 取消</a></span><span class="md-toc-item md-toc-h4" data-ref="n1247"><a class="md-toc-inner" style="cursor: pointer;" href="#3-刷新">3. 刷新</a></span><span class="md-toc-item md-toc-h3" data-ref="n1250"><a class="md-toc-inner" style="cursor: pointer;" href="#十一）找回密码">（十一）找回密码</a></span><span class="md-toc-item md-toc-h3" data-ref="n1265"><a class="md-toc-inner" style="cursor: pointer;" href="#十二）外键">（十二）外键</a></span><span class="md-toc-item md-toc-h4" data-ref="n1269"><a class="md-toc-inner" style="cursor: pointer;" href="#1-外键要求">1. 外键要求</a></span><span class="md-toc-item md-toc-h4" data-ref="n1271"><a class="md-toc-inner" style="cursor: pointer;" href="#2-外键约束">2. 外键约束</a></span><span class="md-toc-item md-toc-h4" data-ref="n1292"><a class="md-toc-inner" style="cursor: pointer;" href="#3-增加操作">3. 增加操作</a></span><span class="md-toc-item md-toc-h4" data-ref="n1297"><a class="md-toc-inner" style="cursor: pointer;" href="#4-删除操作">4. 删除操作</a></span><span class="md-toc-item md-toc-h4" data-ref="n1301"><a class="md-toc-inner" style="cursor: pointer;" href="#5-示例">5. 示例</a></span><span class="md-toc-item md-toc-h3" data-ref="n1303"><a class="md-toc-inner" style="cursor: pointer;" href="#十三）视图">（十三）视图</a></span><span class="md-toc-item md-toc-h4" data-ref="n1307"><a class="md-toc-inner" style="cursor: pointer;" href="#1-创建视图">1. 创建视图</a></span><span class="md-toc-item md-toc-h4" data-ref="n1311"><a class="md-toc-inner" style="cursor: pointer;" href="#2-使用视图">2. 使用视图</a></span><span class="md-toc-item md-toc-h4" data-ref="n1313"><a class="md-toc-inner" style="cursor: pointer;" href="#3-修改视图">3. 修改视图</a></span><span class="md-toc-item md-toc-h4" data-ref="n1316"><a class="md-toc-inner" style="cursor: pointer;" href="#4-删除视图">4. 删除视图</a></span><span class="md-toc-item md-toc-h3" data-ref="n1318"><a class="md-toc-inner" style="cursor: pointer;" href="#十四）事务安全">（十四）事务安全</a></span><span class="md-toc-item md-toc-h4" data-ref="n1322"><a class="md-toc-inner" style="cursor: pointer;" href="#1-自动事务auto-commit）">1. 自动事务（auto commit）</a></span><span class="md-toc-item md-toc-h4" data-ref="n1329"><a class="md-toc-inner" style="cursor: pointer;" href="#2-手动事务">2. 手动事务</a></span><span class="md-toc-item md-toc-h5" data-ref="n1341"><a class="md-toc-inner" style="cursor: pointer;" href="#21-回滚点">2.1 回滚点 </a></span><span class="md-toc-item md-toc-h3" data-ref="n1347"><a class="md-toc-inner" style="cursor: pointer;" href="#十五）变量">（十五）变量</a></span><span class="md-toc-item md-toc-h4" data-ref="n1349"><a class="md-toc-inner" style="cursor: pointer;" href="#1-系统变量">1. 系统变量</a></span><span class="md-toc-item md-toc-h4" data-ref="n1357"><a class="md-toc-inner" style="cursor: pointer;" href="#2-会话变量">2. 会话变量</a></span><span class="md-toc-item md-toc-h4" data-ref="n1369"><a class="md-toc-inner" style="cursor: pointer;" href="#3-局部变量">3. 局部变量</a></span><span class="md-toc-item md-toc-h4" data-ref="n1372"><a class="md-toc-inner" style="cursor: pointer;" href="#4-作用域">4. 作用域</a></span><span class="md-toc-item md-toc-h3" data-ref="n1376"><a class="md-toc-inner" style="cursor: pointer;" href="#十六）流程结构">（十六）流程结构</a></span><span class="md-toc-item md-toc-h4" data-ref="n1377"><a class="md-toc-inner" style="cursor: pointer;" href="#1-if">1. if</a></span><span class="md-toc-item md-toc-h4" data-ref="n1392"><a class="md-toc-inner" style="cursor: pointer;" href="#2-while">2. while</a></span><span class="md-toc-item md-toc-h3" data-ref="n1399"><a class="md-toc-inner" style="cursor: pointer;" href="#十七）函数">（十七）函数</a></span><span class="md-toc-item md-toc-h4" data-ref="n1401"><a class="md-toc-inner" style="cursor: pointer;" href="#1-内置函数">1. 内置函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1402"><a class="md-toc-inner" style="cursor: pointer;" href="#11-字符串函数">1.1 字符串函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1429"><a class="md-toc-inner" style="cursor: pointer;" href="#12-时间函数">1.2 时间函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1481"><a class="md-toc-inner" style="cursor: pointer;" href="#13-数学函数">1.3 数学函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1495"><a class="md-toc-inner" style="cursor: pointer;" href="#14-其他函数">1.4 其他函数</a></span><span class="md-toc-item md-toc-h4" data-ref="n1505"><a class="md-toc-inner" style="cursor: pointer;" href="#2-自定义函数">2. 自定义函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1508"><a class="md-toc-inner" style="cursor: pointer;" href="#21-创建函数">2.1 创建函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1511"><a class="md-toc-inner" style="cursor: pointer;" href="#22-查看函数">2.2 查看函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1514"><a class="md-toc-inner" style="cursor: pointer;" href="#23-调用函数">2.3 调用函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1516"><a class="md-toc-inner" style="cursor: pointer;" href="#24-删除函数">2.4 删除函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n1518"><a class="md-toc-inner" style="cursor: pointer;" href="#25-流程结构与函数">2.5 流程结构与函数</a></span><span class="md-toc-item md-toc-h3" data-ref="n1521"><a class="md-toc-inner" style="cursor: pointer;" href="#十八）存储过程">（十八）存储过程</a></span><span class="md-toc-item md-toc-h4" data-ref="n1532"><a class="md-toc-inner" style="cursor: pointer;" href="#1-创建">1. 创建</a></span><span class="md-toc-item md-toc-h4" data-ref="n1537"><a class="md-toc-inner" style="cursor: pointer;" href="#2-查看">2. 查看</a></span><span class="md-toc-item md-toc-h4" data-ref="n1540"><a class="md-toc-inner" style="cursor: pointer;" href="#3-调用">3. 调用</a></span><span class="md-toc-item md-toc-h4" data-ref="n1542"><a class="md-toc-inner" style="cursor: pointer;" href="#4-删除">4. 删除</a></span><span class="md-toc-item md-toc-h4" data-ref="n1544"><a class="md-toc-inner" style="cursor: pointer;" href="#5-参数">5. 参数</a></span><span class="md-toc-item md-toc-h3" data-ref="n1556"><a class="md-toc-inner" style="cursor: pointer;" href="#十九）触发器">（十九）触发器</a></span><span class="md-toc-item md-toc-h4" data-ref="n1572"><a class="md-toc-inner" style="cursor: pointer;" href="#1-查看触发器">1. 查看触发器</a></span><span class="md-toc-item md-toc-h4" data-ref="n1575"><a class="md-toc-inner" style="cursor: pointer;" href="#2-触发触发器">2. 触发触发器</a></span><span class="md-toc-item md-toc-h4" data-ref="n1577"><a class="md-toc-inner" style="cursor: pointer;" href="#3-删除触发器">3. 删除触发器</a></span><span class="md-toc-item md-toc-h2" data-ref="n1579"><a class="md-toc-inner" style="cursor: pointer;" href="#四运算符">四、运算符</a></span><span class="md-toc-item md-toc-h3" data-ref="n1597"><a class="md-toc-inner" style="cursor: pointer;" href="#一）算数运算">（一）算数运算</a></span><span class="md-toc-item md-toc-h3" data-ref="n1602"><a class="md-toc-inner" style="cursor: pointer;" href="#二）比较运算符">（二）比较运算符</a></span><span class="md-toc-item md-toc-h3" data-ref="n1617"><a class="md-toc-inner" style="cursor: pointer;" href="#三）逻辑运算符">（三）逻辑运算符</a></span><span class="md-toc-item md-toc-h3" data-ref="n1619"><a class="md-toc-inner" style="cursor: pointer;" href="#四）in">（四）in</a></span><span class="md-toc-item md-toc-h3" data-ref="n1623"><a class="md-toc-inner" style="cursor: pointer;" href="#五）is">（五）is</a></span><span class="md-toc-item md-toc-h3" data-ref="n1627"><a class="md-toc-inner" style="cursor: pointer;" href="#六）like">（六）like</a></span><span class="md-toc-item md-toc-h2" data-ref="n1636"><a class="md-toc-inner" style="cursor: pointer;" href="#五工作学习">五、工作学习</a></span><span class="md-toc-item md-toc-h3" data-ref="n1637"><a class="md-toc-inner" style="cursor: pointer;" href="#一）">（一）</a></span><span class="md-toc-item md-toc-h3" data-ref="n1642"><a class="md-toc-inner" style="cursor: pointer;" href="#二）mysql80-连接注意事项">（二）MySQL8.0 连接注意事项</a></span><span class="md-toc-item md-toc-h3" data-ref="n1651"><a class="md-toc-inner" style="cursor: pointer;" href="#三）mysql-导入数据要注意的事项">（三）MySQL 导入数据要注意的事项</a></span><span class="md-toc-item md-toc-h3" data-ref="n1654"><a class="md-toc-inner" style="cursor: pointer;" href="#四）-语句-">（四）/*! 语句 */</a></span></p></div><h1><a name="mysql" class="md-header-anchor"></a><span>MySQL</span></h1><h2><a name="一概述" class="md-header-anchor"></a><span>一、概述</span></h2><h3><a name="一）数据库分类" class="md-header-anchor"></a><span>（一）数据库分类</span></h3><p><span>数据库分类：网络数据库、层级数据库、关系数据库。</span></p><p><span>数据库的另外一种区分方式是基于存储介质进行区分。存储介质分为两种：磁盘、内存。</span></p><ul><li><span>存储在磁盘中：关系型数据库</span></li><li><span>存储在内存中：非关系型数据库</span></li></ul><h3><a name="二）关系型数据库" class="md-header-anchor"></a><span>（二）关系型数据库</span></h3><p><strong><span>关系数据库</span></strong><span>是建立在</span><strong><span>关系模型</span></strong><span>基础上的数据库，借助于集合、代数等数学概念和方法来处理数据库中的数据。</span></p><p><span>关系模型由</span><strong><span>关系数据结构</span></strong><span>、</span><strong><span>关系操作集合</span></strong><span>、</span><strong><span>关系完整性约束</span></strong><span>三部分组成：</span></p><ul><li><p><span>关系数据结构：指的是数据以何种方式存储，是一种二维表的形式存储。</span></p></li><li><p><span>关系操作集合：如何来关联和管理对应的存储数据，在这里就是指的 SQL 指令。</span></p></li><li><p><span>关系完整性约束：数据内部有对应的关联关系，以及数据与数据之间也有对应的关联关系。</span></p><ul><li><span>表内约束：对应的具体列只能存放对应的数据（不能乱放）。</span></li><li><span>表间约束：自然界各实体都是有着对应的关联关系的（规定其他表，例如外键）。</span></li></ul></li></ul><p><span>典型关系型数据库：</span></p><ul><li><span>小型：Microsoft Access、SQLite</span></li><li><span>中型：SQL Server、MySQL（隶属于 Oracle）</span></li><li><span>大型：Oracle、DB2</span></li></ul><h3><a name="三）sql" class="md-header-anchor"></a><span>（三）SQL</span></h3><p><span>SQL 是一种具有特殊目的的编程语言，用于数据库查询和程序设计，专门为关系型数据库而设计出来。</span></p><p><span>SQL 分类：</span></p><ul><li><p><span>数据查询语言（DQL: Data Query Language）：专门用于查询数据。</span></p><ul><li><span>包括：</span><strong><span>SELECT</span></strong><span>、</span><strong><span>SHOW</span></strong></li><li><span>其他：</span><strong><span>WHERE</span></strong><span>、</span><strong><span>ORDER BY</span></strong><span>、</span><strong><span>GROUP BY</span></strong><span>、</span><strong><span>HAVING</span></strong><span>、</span><strong><span>USING</span></strong></li></ul></li><li><p><span>数据操作语言（DML: Data Manipulation Language）：专门用于数据管理。</span></p><ul><li><span>包括：</span><strong><span>INSERT</span></strong><span>、</span><strong><span>DELETE</span></strong><span>、</span><strong><span>UPDATE</span></strong></li></ul></li><li><p><span>数据定义语言（DDL）：专门用于结构管理。</span></p><ul><li><span>包括：</span><strong><span>CREATE</span></strong><span>、</span><strong><span>DROP</span></strong><span>、</span><strong><span>ALTER</span></strong></li></ul></li><li><p><span>数据控制语言（DCL）：专门用于权限管理，包括给予权限和收回权限。</span></p><ul><li><span>包括：</span><strong><span>GRANT</span></strong><span> 或 </span><strong><span>REVOKE</span></strong></li></ul></li><li><p><span>事务处理语言（TPL）：专门用于事务安全处理，并不是所有关系型数据库都提供事务安全处理。MySQL 支持。</span></p><ul><li><span>包括：</span><strong><span>BEGIN</span></strong><span>、</span><strong><span>TRANSACTION</span></strong><span>、</span><strong><span>COMMIT</span></strong><span>、</span><strong><span>ROLLBACK</span></strong></li></ul></li></ul><h3><a name="四）mysql" class="md-header-anchor"></a><span>（四）MySQL</span></h3><h4><a name="1-开启和关闭服务" class="md-header-anchor"></a><span>1. 开启和关闭服务</span></h4><ul><li><span>开启 MySQL 服务：net start mysql</span></li><li><span>关闭 MySQL 服务：net stop mysql</span></li></ul><h4><a name="2-登录和退出-mysql" class="md-header-anchor"></a><span>2. 登录和退出 MySQL</span></h4><ul><li><p><span>登录：mysql -h localhost -P 3306 -u root -p</span></p><ul><li><span>连接本地最简单的语句：mysql -u root -p</span></li><li><span>连接本地 MySQL 服务器就是 localhost，还可以连接远程 MySQL 服务器，那么就需要知道远程 MySQL 服务器 IP 地址或者主机名。</span></li><li><span>如果 MySQL 服务器默认端口没有改变的话，-P 3306 可以不写。</span></li></ul></li><li><p><span>退出：exit、quit、\q。</span></p></li></ul><h4><a name="3-mysql-服务端层次" class="md-header-anchor"></a><span>3. MySQL 服务端层次</span></h4><ol start='' ><li><span>数据库管理系统（DBMS）：专门管理服务器端的所有内容，其实就是数据库。</span></li><li><span>数据库（DB）：专门用于存储数据的仓库，仓库可以有很多个。</span></li><li><span>二维数据表（Table）：专门用于存储具体的实体数据。</span></li><li><span>字段（Field）：具体存储某种类型的数据（实际存储单元）。</span></li></ol><h4><a name="4-编解码" class="md-header-anchor"></a><span>4. 编解码</span></h4><p><span>语法：</span></p><ul><li><strong><span>set names 字符集;</span></strong></li><li><strong><span>show variables like &#39;character_set%&#39;;</span></strong></li><li><strong><span>set 变量名=值;</span></strong></li></ul><p><code>set names 字符集</code><span> 是 mysql.exe 告知 mysqld.exe 自己所使用的字符集，如果要设置 UTF-8 的话：</span><code>set names utf8</code><span>。</span></p><p><code>show variables like &#39;character_set%&#39;</code><span> 是查看当前所有层已经设置的字符集。</span></p><p><code>set 变量名=值</code><span> 是设置指定层字符集。</span></p><figure><table><thead><tr><th><span>Variable_name</span></th><th><span>Value</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>character_set_client</span></td><td><span>utf8mb4</span></td><td><span>客户端传入数据的编码</span></td></tr><tr><td><span>character_set_connection</span></td><td><span>utf8mb4</span></td><td><span>连接使用的编码</span></td></tr><tr><td><span>character_set_database</span></td><td><span>utf8mb4</span></td><td><span>数据库使用编码</span></td></tr><tr><td><span>character_set_filesystem</span></td><td><span>binary</span></td><td><span>存储在文件系统的编码</span></td></tr><tr><td><span>character_set_results</span></td><td><span>utf8mb4</span></td><td><span>返回的结果使用的编码</span></td></tr><tr><td><span>character_set_server</span></td><td><span>utf8mb4</span></td><td><span>服务器使用 的编码</span></td></tr><tr><td><span>character_set_system</span></td><td><span>utf8</span></td><td><span>DBMS 使用的编码</span></td></tr></tbody></table></figure><hr /><p><span>mysql.exe 与 mysqld.exe 之间的处理关系一共分三层：</span></p><ul><li><span>客户端传输数据到服务器：client：character_set_client</span></li><li><span>服务器返回数据给客户端：server：character_set_results</span></li><li><span>客户端与服务器之间的连接：connection：character_set_connection</span></li></ul><p><span>set names 字符集的本质就是一次性打通三层关系的字符集，使他们变得一致。</span></p><h4><a name="5-列类型" class="md-header-anchor"></a><span>5. 列类型</span></h4><h5><a name="51-整数类型" class="md-header-anchor"></a><span>5.1 整数类型</span></h5><ul><li><span>tinyint：采用一个字节来保存整型，范围-128~127</span></li><li><span>smallint：采用两个字节来保存整型，范围-32768~32767</span></li><li><span>mediumint：采用三个字节来保存整型。</span></li><li><span>int：采用四个字节来保存整型，范围-2147483648~2147483647</span></li><li><span>bigint：采用八个字节来保存整型。</span></li></ul><p><span>通常使用最多的是 tinyint 和 int。</span></p><p><span>可以通过在类型之后加一个 unsigned 来使用无符号类型。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_int <span class="cm-keyword">add</span> int_6 <span class="cm-builtin">tinyint</span> <span class="cm-builtin">unsigned</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>tinyint 使用 desc 查看显示 tinyint(4)，而 tinyint unsigned 使用 desc 查看显示 tinyint(3)，个人感觉这就像是在说数字的长度。tinyint 范围-127~128，最长长度为4，tinyint unsiged 因为没有符号，范围0~255，最长只能是255，也就是长度3。smallint desc 显示 smallint(6)，因为最长是其负数-32768，长度为6。</span></p><p><span>在显示的时候是没有达到这个长度的，如果想要显示出来，可以给字段增加一个 zerofill 属性。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_int <span class="cm-keyword">add</span> int_7 <span class="cm-builtin">tinyint</span> <span class="cm-builtin">unsigned</span> <span class="cm-keyword">zerofill</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_int <span class="cm-keyword">add</span> int_8 <span class="cm-builtin">tinyint</span> <span class="cm-keyword">zerofill</span>;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 上面两句其实是一样的</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 需要注意的是，有 zerofill 就一定会有 unsigned，无论是否手动指定</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 为什么呢？因为 zerofill 会在左侧开始填充0，所以负数不能使用。所以，一旦使用 zerofill 则默认 unsigned</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p><span>其实还可以手动指定显示的长度。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_int <span class="cm-keyword">add</span> int_9 <span class="cm-builtin">tinyint</span>(<span class="cm-number">2</span>) <span class="cm-keyword">zerofill</span>;</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 如果数字长度不足2，则补0，如果长度大于等于2，则无变化</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 在存入诸如时间、日期等数据的时候可以指定长度</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h5><a name="52-浮点类型" class="md-header-anchor"></a><span>5.2 浮点类型</span></h5><p><span>在 MySQL 中将小数类型分为两类：</span></p><ul><li><p><span>浮点型：又称之为精度类型，是一种有可能丢失精度的数据类型，数据有可能不那么准确。</span></p><ul><li><span>float：单精度类型，系统提供四个字节来存储数据，精度7位。</span></li><li><span>double：双精度类型，系统提供八个字节来存储数据，精度15位。</span></li></ul></li><li><p><span>定点型：能够保证数据整数部分精确的小数，小数部分可能不精确，超出长度会四舍五入。</span></p><ul><li><span>decimal</span></li></ul></li></ul><hr /><p><span>浮点数以 float 举例，double 同：</span></p><ul><li><p><span>float：表示不指定小数位的浮点数。</span></p></li><li><p><span>float(M, D)：表示一共存储 M 个有效数字，其中小数部分占 D 位。</span></p><ul><li><span>float(10, 2)：整数部分占8位，小数部分占2位。</span></li></ul></li><li><p><span>float(10, 2)：如果数据精度丢失，那么是按照四舍五入方式进行取舍的。</span></p><ul><li><span>如果插入12345678.90的话，得到12345679.00。这里也可以知道，精度为7位，因为第8位就不一致了。</span></li><li><span>如果插入99999999.99的话，得到100000000.00。</span></li></ul></li><li><p><span>float(10, 2)：浮点数可以采用科学计数法存储数据。</span></p><ul><li><span>例如10e5，表示的就是1000000.00。</span></li></ul></li><li><p><span>浮点数通常用于保存一些数量特别大，大到可以不用那么精确的数据。</span></p></li></ul><hr /><p><span>定点型 decimal ，系统会自动根据存储的数据来分配空间，每大概9个数就会分配四个字节来存储。同时，其整数部分和小数部分是分开的。</span></p><ul><li><span>decimal(M, D)：M 表示总长度，最大长度不能超过65，D 代表小数部分长度，最大长度不能超过30。</span></li><li><span>decimal(10, 2)：插入99999999.99，精度没有丢失。</span></li><li><span>decimal(10, 2)：插入99999999.999，会提示错误。因为.999会进1，但是进1之后会导致整数部分精度丢失，因为其超过8位长度了，而 decimal 又是保证整数精度的，所以就提示错误了。</span></li><li><span>定点数的应用：如果涉及到钱的时候就有可能使用定点数。当然，钱也可能换为最小单位，例如分，之后使用 bigint 来存储也是可以的。</span></li></ul><h5><a name="53-时间日期类型" class="md-header-anchor"></a><span>5.3 时间日期类型</span></h5><p><span>日期时间类型总共有五种：</span></p><ul><li><p><span>data：日期类型，系统使用三个字节来存储数据</span></p><ul><li><span>格式：YYYY-mm-dd</span></li><li><span>范围：1000-01-01 ~ 9999-12-31</span></li><li><span>初始值：0000-00-00</span></li></ul></li><li><p><span>time：时间类型，能够用于表示某个指定的时间，但是系统提供三个字节来存储</span></p><ul><li><span>格式：HH:ii:ss</span></li><li><span>范围：MySQL 中能表示的范围：-838:59:59 ~ 838:59:59，在 MySQL 中具体的用处是用来描述时间段。</span></li></ul></li><li><p><span>datetime：日期时间类型，就是将前面的 date 和 time 合并起来表示的时间，使用八个字节存储数据</span></p><ul><li><span>格式：YYYY-mm-dd HH:ii:ss</span></li><li><span>范围：1000-01-01 00:00:00 ~ 9999-12-12 23:59:59</span></li><li><span>初始值：0000-00-00 00:00:00</span></li></ul></li><li><p><span>timestamp：时间戳类型，本来表示的是从格林威治时间到此刻所过去的秒数。MySQL 中的时间戳只是表示从格林威治时间开始，但是其格式依然是 YYYY-mm-dd HH:ii:ss</span></p></li><li><p><span>year：年类型，占用一个字节，其表示的范围为1900 ~ 2155年。但是 year 有两种数据插入方式：</span></p><ul><li><span>两位数：0 ~ 99（1970~2069）</span></li><li><span>四位数：1900 ~ 2155</span></li></ul></li></ul><p><span>上面各类型创建之后最有特点的是 timestamp，其他可以为 NULL 且默认为 NULL，而 timestamp 默认不能为 null，且有默认值为此刻的时间戳，当数据被更新的时候，这个字段默认被更新为此刻的时间戳。</span></p><p><span>另外，year 默认为 year(4)。</span></p><p><strong><span>查看结构</span></strong><span>：</span></p><p><img src='./Resources/MySQL_Resources/日期类型创建默认结构.png' alt='日期类型创建默认结构' referrerPolicy='no-referrer' /></p><p><span>另外比较特殊的 timestamp：</span></p><p><img src='./Resources/MySQL_Resources/timestamp.png' alt='timestamp' referrerPolicy='no-referrer' /></p><p><span>可以参考上图的 </span><code>on update CURRENT_TIMESTAMP</code><span>。</span></p><p><strong><span>year 的特殊性</span></strong><span>：</span></p><ul><li><span>可以采用两位数的数据插入，也可以采用四位数的年份插入</span></li><li><span>两位插入以69和70为界限，如果输入69及以下的两位数，则前面被补充20，如果输入70及以上，则前面被补充19。所以69就为2069,70就为1970，两位范围就为：1970 ~ 2069。</span></li></ul><p><strong><span>timestamp 的特殊性</span></strong><span>：timestamp 所在的记录如果被更新，即使不是自身被更新，那么自身也会自动更新为那一刻的时间戳。</span></p><p><strong><span>time 类型的特殊性</span></strong><span>：</span></p><ul><li><span>本质是用来表示时间区间，能表示的范围比较大（能为正数和负数），不仅能插入到表中，还能正确识别。</span></li><li><span>在进行时间录入的时候，还可以使用一个简单的日期代替时间：在时间格式前加一个空格，然后指定一个数字（还可以为负数），系统会自动将该数字转换成“天数</span><span>*</span><span>24”小时，再加上后面的时间。例如：“5 12:12:12”，那么被转换为了“132:12:12”。</span></li></ul><p><strong><span>插入数据</span></strong><span>：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_date <span class="cm-keyword">values</span>(<span class="cm-string">'1900-01-01'</span>, <span class="cm-string">'12:12:12'</span>, <span class="cm-string">'1900-01-01 12:12:12'</span>, <span class="cm-string">'1999-01-01 12:12:12'</span>, <span class="cm-number">69</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_date <span class="cm-keyword">values</span>(<span class="cm-string">'1900-01-01'</span>, <span class="cm-string">'12:12:12'</span>, <span class="cm-string">'1900-01-01 12:12:12'</span>, <span class="cm-string">'1999-01-01 12:12:12'</span>, <span class="cm-number">2020</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_date <span class="cm-keyword">values</span>(<span class="cm-string">'1900-01-01'</span>, <span class="cm-string">'12:12:12'</span>, <span class="cm-string">'1900-01-01 12:12:12'</span>, <span class="cm-string">'1999-01-01 12:12:12'</span>, <span class="cm-number">70</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p><img src='./Resources/MySQL_Resources/插入日期数据并显示.png' alt='插入日期数据并显示' referrerPolicy='no-referrer' /></p><p><strong><span>修改数据</span></strong><span>：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> my_date <span class="cm-keyword">set</span> d1=<span class="cm-string">'2000-01-01'</span> <span class="cm-keyword">where</span> d5=<span class="cm-number">2069</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><img src='./Resources/MySQL_Resources/修改日期数据并显示.png' alt='修改日期数据并显示' referrerPolicy='no-referrer' /></p><p><span>上面可以看到，虽然修改的是 d5=2069 的 d1，但是类型为 timestamp 的 d4 被修改为了修改那一刻的时间戳。也就是 timestamp 所在的记录如果被更新，那么自身也会自动更新为那一刻的时间戳。</span></p><p><strong><span>插入时间</span></strong><span>：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">insert</span> <span class="cm-variable">into</span> <span class="cm-variable">my_date</span> <span class="cm-def">values</span>(<span class="cm-string">'1900-01-01'</span>, <span class="cm-string">'512:12:12'</span>, <span class="cm-string">'1900-01-01 12:12:12'</span>, <span class="cm-string">'1999-01-01 12:12:12'</span>, <span class="cm-number">70</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">insert</span> <span class="cm-variable">into</span> <span class="cm-variable">my_date</span> <span class="cm-def">values</span>(<span class="cm-string">'1900-01-01'</span>, <span class="cm-string">'5 12:12:12'</span>, <span class="cm-string">'1900-01-01 12:12:12'</span>, <span class="cm-string">'1999-01-01 12:12:12'</span>, <span class="cm-number">70</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><img src='./Resources/MySQL_Resources/插入时间并显示.png' alt='插入时间并显示' referrerPolicy='no-referrer' /></p><h5><a name="54-字符串类型" class="md-header-anchor"></a><span>5.4 字符串类型</span></h5><p><span>字符串类型有五种：</span></p><ul><li><p><span>char：定长字符，指定长度后，系统一定会分配指定的空间用于存储指定的数据。</span></p><ul><li><span>语法：char(L)，L 代表字符数，一个英文字母、一个数字和一个中文汉字都一视同仁，作为一个字符。</span></li><li><span>长度：0 ~ 255</span></li></ul></li><li><p><span>varchar：变长字符，指定长度后，系统会根据实际存储的数据来计算长度，分配合适的长度（数据没有超出长度）。</span></p><ul><li><span>语法：varchar(L)，同 char。</span></li><li><span>长度：0 ~ 65535（理论）</span></li><li><span>注意：因为 varchar 要记录数据长度，所以每个 varchar 数据产生后，系统都会在数据后面增加1~2个字节的额外开销用于保存数据所占的空间长度。</span></li></ul></li><li><p><span>text：文本类型，存储普通的字符文本。</span></p></li><li><p><span>enum：枚举类型，通常记为单选。</span></p></li><li><p><span>set：集合类型，通常记为多选。</span></p></li></ul><hr /><p><strong><span>char 和 varchar 数据存储对比（UTF-8，一个字符占用三个字节）</span></strong><span>：</span></p><figure><table><thead><tr><th><span>存储数据</span></th><th><span>char(2)</span></th><th><span>varchar(2)</span></th><th><span>char 所占字节</span></th><th><span>varchar 所占字节</span></th></tr></thead><tbody><tr><td><span>a</span></td><td><span>a</span></td><td><span>a</span></td><td><span>3*2=6</span></td><td><span>3*1+1=4</span></td></tr><tr><td><span>ab</span></td><td><span>ab</span></td><td><span>ab</span></td><td><span>3*2=6</span></td><td><span>3*2+1=7</span></td></tr><tr><td><span>abc</span></td><td><span>报错</span></td><td><span>报错</span></td><td><span>NaN</span></td><td><span>NaN</span></td></tr></tbody></table></figure><p><strong><span>char 和 varchar 的区别</span></strong><span>：</span></p><ul><li><span>char 一定会使用指定的空间，但是 varchar 是根据数据来定空间。</span></li><li><span>char 的数据查询效率高于 varchar。</span></li></ul><p><strong><span>char 和 varchar 的选择</span></strong><span>：</span></p><ul><li><span>如果确定数据一定是占指定长度，那么使用 char 类型。</span></li><li><span>如果不确定数据到底有多少，那么使用 varchar 类型。</span></li></ul><p><strong><span>注意</span></strong><span>：如果数据长度超过255个字符，无论是否固定长度，都会使用 text，不再使用 char 或 varchar。</span></p><hr /><p><strong><span>text 详解</span></strong><span>：</span></p><p><span>本质上 MySQL 提供了两种文本存储类型：</span></p><ul><li><span>text：存储普通字符文本。</span></li><li><span>blob：存储二进制文本（图片等）。不过一般都不会使用 blob 来存储文件本身，通常是使用一个链接来指向对应文件本身。</span></li></ul><p><span>系统提供了4中 text：</span></p><ul><li><span>tinytext：系统使用一个字节来保存，实际存储为2^8+1</span></li><li><span>text：使用两个字节保存数据，实际存储为2^16+2</span></li><li><span>mediumtext：使用三个字节保存数据，实际存储为2^24+3</span></li><li><span>longtext：使用四个字节保存数据，实际存储为2^32+4</span></li></ul><p><span>注意：</span></p><ul><li><span>在存储文本的时候，不用特意去选择 text 类型，系统会自动根据存储的数据长度来选择合适的文本类型，一般就直接用 text。</span></li><li><span>在选择存储字符的时候，如果超过255个字符，一定要选择 text 来存储，不要使用 char 或 varchar。</span></li></ul><hr /><p><strong><span>enum 详解</span></strong><span>：</span></p><p><span>枚举在数据插入之前，先设定几个值，插入的值就是这几个值中的某一个。如果预先知道要存放的是那些值，就可以使用枚举类型。</span></p><p><span>插入的时候只能插入枚举列举的数据，否则插入失败。所以，枚举的一个特点就是可以规范数据。</span></p><p><span>基本语法：</span><strong><span>enum(数据值1[, 数据值2]...)</span></strong></p><p><strong><span>系统提供了1~2个字节来存储枚举数据</span></strong><span>。通过计算 enum 列举的具体值来选择实际的存储空间。如果数据列表在255个值以内，那么就使用一个字节来存储，超过255个字符，但小于65535个字符就采用两个字节来存储。我感觉应该是存放的下标，否则不可能只用1~2个字节。</span><strong><span>实际也是存储的下标，下标从1开始</span></strong><span>。例如：enum(&#39;男&#39;, &#39;女&#39;, &#39;保密&#39;)，那么“男”的下标就是1，“保密”的下标就是3。</span></p><p><strong><span>而且，enum 保存的是下标，当进行插入的时候，也可以插入下标，而不会报错</span></strong><span>！</span></p><p><span>验证：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_enum(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>gendar<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-keyword">enum</span>(<span class="cm-string">'男'</span>, <span class="cm-string">'女'</span>, <span class="cm-string">'保密'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_enum <span class="cm-keyword">values</span>(<span class="cm-string">'男'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_enum <span class="cm-keyword">values</span>(<span class="cm-string">'女'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_enum <span class="cm-keyword">values</span>(<span class="cm-string">'保密'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 如果这里输出的是3，则表示存放的是下标；如果输出的是0，则表明存放的是字符串。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这是 MySQL 的特性，在 MySQL 的第7点可以查看</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> gendar*<span class="cm-number">1</span> <span class="cm-keyword">from</span> my_enum <span class="cm-keyword">where</span> gendar=<span class="cm-string">'保密'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 所以其实可以直接插入下标，最后还是可以通过 select 正确取得字符串</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_enum <span class="cm-keyword">values</span>(<span class="cm-number">3</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 虽然插入是3，但是输出的时候还是输出的“保密”</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_enum;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><p><span>枚举的意义：</span></p><ul><li><span>规范存储</span></li><li><span>节省空间</span></li></ul><hr /><p><strong><span>set 详解</span></strong><span>：</span></p><p><span>类似于枚举，但是可以同时保存多种类型的数据，本质是将</span></p><p><span>基本语法：</span><strong><span>set(&#39;值1&#39;[, &#39;值2&#39;]...)</span></strong></p><p><span>系统为 set 提供了多个字节进行保存，但是系统会自动计算来选择具体的存储单元：</span></p><ul><li><span>一个字节：8个选项。</span></li><li><span>两个字节：16个选项。</span></li><li><span>三个字节：24个选项。</span></li><li><span>四个字节：32个选项。</span></li><li><span>八个字节：64个选项。</span></li></ul><p><strong><span>set 和 enum 一样，最终是通过数字存储，而非真实的字符串</span></strong><span>。我感觉好像是 html 的 checkbox，假设一个字节来存储，那么选中第一个和选中最后一个就用1+128=129！就是：1000-0001=1+128=129。</span></p><p><strong><span>需要注意的是二进制位从左到右依次递增！这和计算机表示的方法是相反的，所以最后还需要调转方向</span></strong><span>！</span></p><figure><table><thead><tr><th style='text-align:center;' ><span>篮球</span></th><th style='text-align:center;' ><span>足球</span></th><th style='text-align:center;' ><span>羽毛球</span></th><th style='text-align:center;' ><span>乒乓球</span></th><th style='text-align:center;' ><span>网球</span></th><th style='text-align:center;' ><span>橄榄球</span></th><th style='text-align:center;' ><span>冰球</span></th><th style='text-align:center;' ><span>排球</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>0</span></td></tr></tbody></table></figure><p><span>假设如上所示，选中了篮球、足球、羽毛球，那么我们看来就是1110-0000，那么按照从左到右递增，就是1+2+4=7。但是在计算机中是从右到左递增的，所以计算机中表示的就需要调转方向为：0000-0111，这才是正确的表示方式！</span></p><p><span>验证：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_set (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>hobby<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-keyword">set</span>(<span class="cm-string">'篮球'</span>, <span class="cm-string">'足球'</span>, <span class="cm-string">'羽毛球'</span>, <span class="cm-string">'乒乓球'</span>, <span class="cm-string">'网球'</span>, <span class="cm-string">'橄榄球'</span>, <span class="cm-string">'冰球'</span>, <span class="cm-string">'排球'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_set <span class="cm-keyword">values</span>(<span class="cm-string">'篮球'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_set <span class="cm-keyword">values</span>(<span class="cm-number">128</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_set <span class="cm-keyword">values</span>(<span class="cm-string">'排球'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_set <span class="cm-keyword">values</span>(<span class="cm-number">129</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_set;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这里需要注意，where hobby='篮球,排球' 逗号左右不能出现空格</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 所以前面插入129可以写为'篮球,排球'，不能出现空格</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> hobby*<span class="cm-number">1</span> <span class="cm-keyword">from</span> my_set <span class="cm-keyword">where</span> hobby=<span class="cm-string">'篮球,排球'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p><img src='./Resources/MySQL_Resources/查询所有 set.png' alt='查询所有 set' referrerPolicy='no-referrer' /></p><p><img src='./Resources/MySQL_Resources/查询特定 set.png' alt='查询特定 set' referrerPolicy='no-referrer' /></p><p><span>集合的意义：</span></p><ul><li><span>规范数据</span></li><li><span>节省空间</span></li></ul><h4><a name="6-列属性" class="md-header-anchor"></a><span>6. 列属性</span></h4><p><span>列属性又称为字段属性，在 MySQL 中共有6个属性：</span></p><ul><li><span>NULL</span></li><li><span>DEFAULT</span></li><li><span>COMMENT</span></li><li><span>PRIMARY KEY</span></li><li><span>AUTO_INCREMENT</span></li><li><span>UNIQUE KEY</span></li></ul><hr /><h5><a name="61-null" class="md-header-anchor"></a><span>6.1 NULL</span></h5><p><span>字段是否允许为空。使用 desc 查看表结构 NULL 为 YES 表示该字段可以为 NULL。需要注意的是，</span><strong><span>如果一个表中有字段允许 NULL，那么系统就会保留一个字节来存储 NULL，则最终一条记录的有效存储长度为65534个字节</span></strong><span>。</span></p><ul><li><span>NULL：允许为空</span></li><li><span>NOT NULL：不允许为空</span></li></ul><hr /><h5><a name="62-default" class="md-header-anchor"></a><span>6.2 DEFAULT</span></h5><p><span>默认值，与 NULL 配对。当一个字段设计的时候被允许为空，也就是允许用户不插入数据。那么就可以使用实现准备好的数据来填充，</span><strong><span>如果没有指定 DEFAULT，通常默认填充 NULL</span></strong><span>。使用 desc 查看表结构 DEFAULT 如果没有指定默认就是 NULL，</span><strong><span>如果有指定过，那么就是指定的值</span></strong><span>。在插入值的时候，</span><strong><span>可以使用 DEFAULT 关键字表示使用默认值</span></strong><span>。</span></p><ul><li><span>DEFAULT 18：默认值为18</span></li><li><span>DEFAULT &#39;CN&#39;：默认值为“CN”</span></li></ul><hr /><h5><a name="63-comment" class="md-header-anchor"></a><span>6.3 COMMENT</span></h5><p><span>列描述，专门</span><strong><span>给开发人员进行维护的一个注释说明</span></strong><span>。</span></p><ul><li><span>COMMENT &#39;这是注释&#39;：添加了注释，可以通过 </span><code>show create table table_name</code><span> 来查看。</span></li></ul><hr /><h5><a name="64-primary-key" class="md-header-anchor"></a><span>6.4 PRIMARY KEY</span></h5><p><span>可以定义在列上，也可以定义在表上。在一张表里</span><strong><span>只有一个或一组字段组成主键，主键在表中具有唯一性，且主键不可以为空，也就是说 PRIMARY KEY 一定 NOT NULL</span></strong><span>。</span></p><p><strong><span>创建</span></strong><span>：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 创建有两大类方式：随表创建、表后创建</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 随表创建，有两种方式，一种是字段属性，一种是字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 字段属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_primary_1 (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>username<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>)<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">primary</span> <span class="cm-keyword">key</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_primary_2 (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>username<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> (username)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 表后创建</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_primary <span class="cm-keyword">add</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>(username);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p><strong><span>查看</span></strong><span>：</span></p><p><span>以下几种方式：</span></p><ul><li><p><span>通过查看表结构来查看主键，在 Key 字段，如果有 PRI 则表示为主键。</span></p><ul><li><code>desc table_name</code></li><li><code>describe table_name</code></li><li><code>show columns from table_name</code></li></ul></li><li><p><span>通过查看表创建语句来查看主键。</span></p><ul><li><code>show create table table_name</code></li></ul></li></ul><p><strong><span>删除</span></strong><span>：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除表的主键</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_primary <span class="cm-keyword">drop</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 需要注意的是，虽然 PRIMARY KEY 被删除了，但是 NOT NULL 依旧保留</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><strong><span>复合</span></strong><span>：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 多个字段共同组合主键的话，PRIMARY KEY 只能定义为字段，而不能再多个字段上面添加 PRIMARY KEY</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 也就是说，PRIMARY KEY 这个关键字在整个表中只能出现一次</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_score (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>student_id<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">char</span>(<span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  course_id<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">char</span>(<span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  score<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">tinyint</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> (student_id, course_id)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 之后通过 desc 查看的时候可以看到 student_id 和 course_id 在 Key 字段有 PRI 的字样</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><strong><span>约束</span></strong><span>：</span></p><p><span>主键一旦增加，就会对对应的字段有数据要求：</span></p><ul><li><span>对应字段的数据不能为空</span></li><li><span>对应字段的数据不能重复</span></li></ul><p><strong><span>分类</span></strong><span>：</span></p><p><span>主键分类采用的是主键所对应的字段的业务意义进行分类：</span></p><ul><li><strong><span>业务主键</span></strong><span>：主键所在的字段句有业务意义，例如 student_id、course_id，都代表具体的业务意义</span></li><li><strong><span>逻辑主键</span></strong><span>：自然增长的整型，没有业务意义，但是就是具有唯一性，能区分不同记录，应用广泛。</span></li></ul><hr /><h5><a name="65-autoincrement" class="md-header-anchor"></a><span>6.5 AUTO_INCREMENT</span></h5><p><span>当给定某个字段该属性之后，该列的数据在没有提供确定数据的时候，系统会根据之前已经存在的数据进行自动增加并填充数据。自动增长通常用来作为逻辑主线，</span><strong><span>其只适用于数值，且一张表中最多只能拥有一个自增长，自增长也必须设置为主键</span></strong><span>。</span></p><p><strong><span>原理</span></strong><span>：</span></p><ul><li><span>在系统中有维护一组数据，用来保存当前使用了自动增长属性的字段，记住当前对应的数据值，再给定一个指定的步长。</span></li><li><span>当用户进行数据插入的时候，如果没有给定值，系统会在原始值上再加上步长变成新的数据。</span></li></ul><p><strong><span>创建和触发</span></strong><span>：</span></p><p><span>给定该属性的字段没有提供值，就会触发自动增长。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_auto (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  uname<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>)<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">comment</span> <span class="cm-string">'用户名'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  upass<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>)<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">comment</span> <span class="cm-string">'密码'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- PRIMARY KEY 不能为空，但是传入了 NULL，系统就会自动触发自动增长</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_auto(uname, upass) <span class="cm-keyword">values</span>(<span class="cm-string">'lalala'</span>, <span class="cm-string">'lalala'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_auto <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'admin'</span>, <span class="cm-string">'admin'</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><strong><span>修改</span></strong><span>：</span></p><p><span>通过查看表创建可以查看自增长：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_auto;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">CREATE TABLE `my_auto` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`uname` varchar(16) NOT NULL COMMENT '用户名',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`upass` varchar(16) NOT NULL COMMENT '密码',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 上面 auto_increment=3 是因为我已经插入了两条数据了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改为10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_auto <span class="cm-keyword">auto_increment</span>=<span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 下次插入数据的时候 id 就从10开始自增了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 不过需要注意的是，修改的值不能比已存在的记录的自增列的值小</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p><strong><span>删除</span></strong><span>：</span></p><p><span>删除自增长就是在字段属性之后不再保留 auto_increment。当用户修改自增长所在字段时，如果系统没有发现 auto_increment 属性，就会自动清除该自增长。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_auto <span class="cm-keyword">modify</span> id <span class="cm-builtin">int</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 切记不要再增加 PRIMARY KEY，因为之前已经设置了 PRIMARY KEY，为表的字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 设置在自增字段上的 PRIMARY KEY 属性会被自动修改为表的字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_auto (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_auto;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">CREATE TABLE `my_auto` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 自增字段必须为键，为主键和唯一键皆可</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_auto (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">auto_increment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这里会创建失败：Error Code: 1075. Incorrect table definition; there can be only one auto column and it must be defined as a key</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 483px;"></div><div class="CodeMirror-gutters" style="display: none; height: 483px;"></div></div></div></pre><p><strong><span>设置</span></strong><span>：</span></p><p><span>在系统中有一组变量用来维护自增长的初始值和步长。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查看变量</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'auto_increment%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- auto_increment_increment：步长</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- auto_increment_offset：初始值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 设置变量，设置初始为2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> auto_increment_offset=<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 设置变量，设置步长为2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> auto_increment_increment=<span class="cm-number">2</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><img src='./Resources/MySQL_Resources/维护自增长的系统变量.png' alt='维护自增长的系统变量' referrerPolicy='no-referrer' /></p><p><strong><span>细节</span></strong><span>：</span></p><ul><li><span>一张表只有一个自增长</span></li><li><span>如果给定了数据就不会触发自增长，但是会更新自增长偏移。例如，我本来下一个自增长为4，但是我手动给定数据6，那么下一次自增长就会从7开始自增。</span></li><li><span>修改表的自增长 auto_increment 的时候，值可以较大，但是不能比</span><strong><span>当前已有的</span></strong><span>自增字段的值小。</span><strong><span>如果使用 delete 将表清空的话，就可以修改到1。如果为0的话，第一次修改是会变为3的，但是第二次修改就看不到 auto_increment 的值了，但是插入值的话是从1开始，反正是不会变为0的</span></strong><span>。</span></li><li><span>手动输入自增长字段的值是可以小于已存在的值的 ，只要不重复即可。</span></li></ul><hr /><h5><a name="66-unique-key" class="md-header-anchor"></a><span>6.6 UNIQUE KEY</span></h5><p><span>唯一键，用于保证对应字段中的数据是唯一的。主键也能保证唯一，但是一张表中只能有一个主键，而唯一键是可以存在多个的。另外，唯一键是允许字段为 NULL 的，且允许多条数据的唯一键均为 NULL，因为 NULL 是无法比较的。</span></p><p><strong><span>创建</span></strong><span>：</span></p><p><span>唯一键的创建方式和主键基本是一样的：</span></p><ul><li><span>直接在字段后添加 unique[ key] 属性即可。</span></li><li><span>作为表的字段，使用 unique key(字段1[, 字段2]...)。</span></li><li><span>在创建完表之后也可以增加唯一键：</span><code>alter table table_name add unique key(字段1[, 字段2]...)</code></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 作为字段属性</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_1 (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  username <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">unique</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 作为字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_2 (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  username <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">unique</span> <span class="cm-keyword">key</span> (username)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 表后创建</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_3 (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  username <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_unique_3 <span class="cm-keyword">add</span> <span class="cm-keyword">unique</span> <span class="cm-keyword">key</span> (username);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查看详情</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">desc</span> my_unique_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| Field &nbsp;  | Type &nbsp; &nbsp; &nbsp;  | Null | Key | Default | Extra &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| id &nbsp; &nbsp; &nbsp; | int(11) &nbsp; &nbsp; | NO &nbsp; | PRI | NULL &nbsp;  | auto_increment |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| username | varchar(16) | YES  | UNI | NULL &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查看创建</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">Create Table: CREATE TABLE `my_unique_3` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`username` varchar(16) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">-- 在这里还可以看到与 PRIMARY KEY 不同的是，UNIQUE KEY 多了一个名字 username</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">-- 系统会为唯一键自动创建一个名字，默认为字段名。这个名字在删除唯一键的时候可以用到 </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">UNIQUE KEY `username` (`username`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 989px;"></div><div class="CodeMirror-gutters" style="display: none; height: 989px;"></div></div></div></pre><p><strong><span>删除</span></strong><span>：</span></p><p><span>基本语法：</span><code>alter table 表名 drop index 唯一键名字</code></p><p><span>index 代表的是索引（索引用于提升查询效率），唯一键是索引的一种。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除唯一键</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> my_nuique_3 <span class="cm-keyword">drop</span> <span class="cm-keyword">index</span> username;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">desc</span> my_unique_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| Field &nbsp;  | Type &nbsp; &nbsp; &nbsp;  | Null | Key | Default | Extra &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| id &nbsp; &nbsp; &nbsp; | int(11) &nbsp; &nbsp; | NO &nbsp; | PRI | NULL &nbsp;  | auto_increment |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| username | varchar(16) | YES  | &nbsp; &nbsp; | NULL &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 下面是删除唯一键之前的表结构，可以发现，Key 列的 UNI 没有了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| Field &nbsp;  | Type &nbsp; &nbsp; &nbsp;  | Null | Key | Default | Extra &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| id &nbsp; &nbsp; &nbsp; | int(11) &nbsp; &nbsp; | NO &nbsp; | PRI | NULL &nbsp;  | auto_increment |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| username | varchar(16) | YES  | UNI | NULL &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+----------+-------------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">CREATE TABLE `my_unique_3` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`username` varchar(16) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 下面是删除唯一键之前的创建代码，可以看到，定义 UNIQUE KEY 的那一句没有了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">Create Table: CREATE TABLE `my_unique_3` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`username` varchar(16) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">UNIQUE KEY `username` (`username`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 897px;"></div><div class="CodeMirror-gutters" style="display: none; height: 897px;"></div></div></div></pre><p><strong><span>复合</span></strong><span>：</span></p><p><span>唯一键和主键一样，同样可以将多个字段共同来定义唯一键。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_4 (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  student_id <span class="cm-builtin">char</span>(<span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  course_id <span class="cm-builtin">char</span>(<span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">unique</span> <span class="cm-keyword">key</span> unique_name (student_id, course_id)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">desc</span> my_unique_4;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+------------+----------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| Field &nbsp; &nbsp;  | Type &nbsp; &nbsp; | Null | Key | Default | Extra &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+------------+----------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| id &nbsp; &nbsp; &nbsp; &nbsp; | int(11)  | NO &nbsp; | PRI | NULL &nbsp;  | auto_increment |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| student_id | char(10) | YES  | MUL | NULL &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">| course_id  | char(10) | YES  | &nbsp; &nbsp; | NULL &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">+------------+----------+------+-----+---------+----------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_unique_4;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">CREATE TABLE `my_unique_4` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`student_id` char(10) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`course_id` char(10) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">UNIQUE KEY `unique_name` (`student_id`,`course_id`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 644px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><p><span>查看索引：</span><code>show index from table_name</code><span>，下面为 </span><code>show index from my_unique_4</code><span>：</span></p><p><img src='./Resources/MySQL_Resources/查看索引.png' alt='查看索引' referrerPolicy='no-referrer' /></p><p><strong><span>一般主键都是单一字段（逻辑主键），而其他需要唯一性的内容都是由唯一键来处理的</span></strong><span>。例如，my_unique_4 这张表就是用 id 自增作为逻辑主键，student_id 和 course_id 来保证唯一。</span></p><h4><a name="7-表关系" class="md-header-anchor"></a><span>7. 表关系</span></h4><p><span>表关系指的就是表与表之间，也就是实体与实体之间有什么关系，每种关系应该如何设计表结构。</span></p><h5><a name="71-一对一" class="md-header-anchor"></a><span>7.1 一对一</span></h5><p><span>一张表中的一条记录与另外一张表中最多有一条明确的关系。</span></p><p><span>设计：通常只需要保证两张表使用同样的主键即可。</span></p><p><span>案例：一个学生有很多信息，有些信息是常用的，有些信息是不常用的，这时候可以创建两张表，一张表记录常用信息，一张表记录不常用的信息，这两张表都使用相同的主键，例如学生的学号作为主键。</span></p><p><span>学生常用信息表：</span></p><figure><table><thead><tr><th><span>学号</span></th><th><span>姓名</span></th><th><span>年龄</span></th><th><span>性别</span></th></tr></thead><tbody><tr><td><span>S1</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><span>学生不常用信息表：</span></p><figure><table><thead><tr><th><span>学号</span></th><th><span>籍贯</span></th><th><span>婚否</span></th><th><span>住址</span></th></tr></thead><tbody><tr><td><span>S1</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h5><a name="72-一对多" class="md-header-anchor"></a><span>7.2 一对多</span></h5><p><span>一对多，通常也叫做多对一。</span></p><p><span>设计：通常一对多的关系设计的方案是在“多”的关系表中去维护一个字段，这个字段是“一”的主键。</span></p><p><span>案例：一个母亲有多个孩子，相当于一对多。就可以在孩子表里面维护母亲表的 ID。</span></p><p><span>母亲表：</span></p><figure><table><thead><tr><th><span>母亲 ID</span></th><th><span>姓名</span></th><th><span>年龄</span></th><th><span>身高</span></th></tr></thead><tbody><tr><td><span>M1</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><span>孩子表：</span></p><figure><table><thead><tr><th><span>母亲 ID</span></th><th><span>孩子 ID</span></th><th><span>姓名</span></th><th><span>年龄</span></th><th><span>身高</span></th></tr></thead><tbody><tr><td><span>M1</span></td><td><span>C1</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>M1</span></td><td><span>C2</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h5><a name="73-多对多" class="md-header-anchor"></a><span>7.3 多对多</span></h5><p><span>多对多的含义是，一张表中的记录在另外一张表中可以匹配到多条记录，反过来也是一样。</span></p><p><span>设计：引入第三张表，第三张表将另外两张表的主键作为自己的唯一键维护即可。</span></p><p><span>案例：一个老师教导多个学生；一个学生被多个老师教导。这样的话，就需要引入第三张表。</span></p><p><span>老师表：</span></p><figure><table><thead><tr><th><span>老师 ID</span></th><th><span>姓名</span></th><th><span>年龄</span></th><th><span>性别</span></th></tr></thead><tbody><tr><td><span>T1</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>T2</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><span>学生表：</span></p><figure><table><thead><tr><th><span>学生 ID</span></th><th><span>姓名</span></th><th><span>年龄</span></th><th><span>性别</span></th></tr></thead><tbody><tr><td><span>S1</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>S2</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><span>老师_学生表：</span></p><figure><table><thead><tr><th><span>逻辑主键 ID</span></th><th><span>老师 ID</span></th><th><span>学生 ID</span></th></tr></thead><tbody><tr><td><span>1</span></td><td><span>T1</span></td><td><span>S1</span></td></tr><tr><td><span>2</span></td><td><span>T1</span></td><td><span>S2</span></td></tr><tr><td><span>3</span></td><td><span>T2</span></td><td><span>S1</span></td></tr><tr><td><span>4</span></td><td><span>T2</span></td><td><span>S2</span></td></tr></tbody></table></figure><p><span>其实这第三张单独拿出来和另外两张表来做比较都可以看做是一对多的关系，第三张表作为“多”，另外两张表作为“一”。</span></p><h4><a name="8-其他" class="md-header-anchor"></a><span>8. 其他</span></h4><p><span>MySQL 有多种语句结束符：</span></p><ul><li><span>“;”与“\g”，字段在上，数据在下。</span></li><li><span>“\G”：字段在左，数据在右。</span></li></ul><hr /><p><span>MySQL 有个特点就是自动类型转换：如果碰到“+”、“-”、“*”、”/“，系统会自动将数据转换成数值；而普通字符串会被转换为数值0。</span></p><hr /><p><span>MySQL 有一个规定：MySQL 的一条记录的长度总长度不能超过65535个</span><strong><span>字节</span></strong><span>。</span></p><p><span>varchar 理论能存储65535个</span><strong><span>字符</span></strong><span>，远远超过规定长度，所以虽然 varchar 有存储65535个字符的能力，但是在 MySQL 中并不能存储那么多字符！</span></p><p><span>UTF-8：65536/3=21845，varchar 还需要2个额外字节，在这里也是需要2个额外字节，所以最多存储21844个 UTF-8 字符。</span></p><p><span>GBK：65535/2=32767 - 1，varchar 还需要2个额外字节，在这里还需要1个额外字节，所以最多存储32766个 GBK 字符。</span></p><p><span>所以，遇到太长的字符串的话就需要用 text 来存储了。</span></p><h2><a name="二操作" class="md-header-anchor"></a><span>二、操作</span></h2><h3><a name="一）数据库操作" class="md-header-anchor"></a><span>（一）数据库操作</span></h3><h4><a name="1-创建" class="md-header-anchor"></a><span>1. 创建</span></h4><p><span>语法：</span><strong><span>craete database 数据库名 [库选项];</span></strong></p><p><span>库选项：</span></p><ul><li><p><span>字符集：charset，代表当前数据库下所有表存储的数据默认指定的字符集。如果不指定，则采用 DBMS 默认字符集，一般是 UTF-8。</span></p><ul><li><span>create database 数据库名 charset 字符集名称</span></li></ul></li><li><p><span>校对集：collation，如果不指定的话，会随着字符集的指定而默认指定和字符集一致的校对集。</span></p><ul><li><span>create database 数据库名 collation 校对集名称</span></li></ul></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 创建数据库</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">database</span> mydatabase;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 采用 GBK 字符集创建数据库</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">database</span> mydatabase_gbk <span class="cm-string-2">charset</span> gbk;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><h4><a name="2-查看" class="md-header-anchor"></a><span>2. 查看</span></h4><p><span>每当用户通过 SQL 指令创建一个数据库，那么系统就会产生一个对应的存储数据的文件夹。每个数据库目录下都有一个 opt 文件，保存的是对应的数据库选项。在我机器的路径为：C:\ProgramData\MySQL\MySQL Server 5.7\Data。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// mydatabase 的 opt</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">default-character-set=utf8</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">default-collation=utf8_general_ci</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// mydatabase_gbk 的 opt</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">default-character-set=gbk</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">default-collation=gbk_chinese_ci</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// 可以看到，charset 和 collation 是配对的，如果不指定 charset 在我这里默认编码 utf-8，如果指定 charset 为 gbk，那么 collation 默认也指定为和 gbk 一致的 gbk_chinese_ci 了。</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><strong><span>2.1 查看所有数据库</span></strong><span>：</span></p><p><span>语法：</span><strong><span>show databases;</span></strong></p><figure><table><thead><tr><th><span>表</span></th><th><span>作用</span></th></tr></thead><tbody><tr><td><span>information_schema</span></td><td><span>保存数据库所有的结构信息（库、表，show databases 就是从这里查询的数据）</span></td></tr><tr><td><span>mysql</span></td><td><span>核心数据库，包括了权限关系、用户关系</span></td></tr><tr><td><span>performance_schema</span></td><td><span>效率库（里面存放的是运行效率信息）</span></td></tr><tr><td><span>test</span></td><td><span>学习用的库，空库</span></td></tr></tbody></table></figure><p><strong><span>2.2 查看匹配数据库</span></strong><span>：</span></p><p><span>语法：</span><strong><span>show databases like &#39;匹配模式&#39;;</span></strong></p><p><span>匹配模式：</span></p><ul><li><span>“_”：匹配单个字符</span></li><li><span>“%”：匹配零个或多个字符</span></li></ul><p><strong><span>2.3 查看数据库创建语句</span></strong><span>：</span></p><p><span>语法：</span><strong><span>show create database 数据库名;</span></strong></p><h4><a name="3-选择" class="md-header-anchor"></a><span>3. 选择</span></h4><p><span>数据存储于数据表，数据表存储于数据库。所以，如果要操作数据，那么必须要进入到对应的数据库。</span></p><p><span>语法：</span><strong><span>use 数据库名;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 选择 mydatabase 数据库</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> mydatabase;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Database</span> <span class="cm-keyword">Changed</span> <span class="cm-comment">-- 这就表示已经进入到了 mydatabase 这个数据库的环境了</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h4><a name="4-修改" class="md-header-anchor"></a><span>4. 修改</span></h4><p><span>可以修改数据库库选项（也就是字符集和校对集）。在 MySQL 5.5 之前，可以使用 rename 修改数据库名，但是在这之后是不可以修改数据库名的。</span></p><p><span>语法：</span><strong><span>alter database 数据库名 {charset=字符集 |charset 字符集};</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 将 mydatabase_gbk 的字符集修改为 utf-8，校对集也会默认被修改，修改成功就会在 opt 当中体现出来</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 不过一般是不会修改的，特别是当存放了数据之后</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">database</span> mydatabase_gbk <span class="cm-string-2">charset</span> utf8;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h4><a name="5-删除" class="md-header-anchor"></a><span>5. 删除</span></h4><p><span>语法：</span><strong><span>drop database 数据库名;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除数据库,整个数据库目录也会被删除</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">database</span> mydatabase_gbk;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3><a name="二）数据表" class="md-header-anchor"></a><span>（二）数据表</span></h3><h4><a name="1-创建" class="md-header-anchor"></a><span>1. 创建</span></h4><p><span>有两种创建表的方式：普通创建表、复制已有表。</span></p><p><strong><span>1.1 普通创建表</span></strong><span>：</span></p><p><span>语法：</span><strong><span>create table 表名 (字段名 字段类型 [字段属性]</span><span>[</span><span>, 字段名 字段类型 [字段属性]]...) [表选项];</span></strong></p><p><span>表选项：</span></p><ul><li><span>字符集：charset，只对自己有效，级别高于数据库。</span></li><li><span>校对集：collation</span></li><li><span>存储引擎：engine，MySQL 提供的具体存储数据的方式，MySQL 5.5 前默认 myisam，现在默认 innodb。</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">create table 表名 (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  字段名<span class="cm-tab" role="presentation" cm-text="	"> </span>字段类型<span class="cm-tab" role="presentation" cm-text="	">    </span>[字段属性][,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  字段名<span class="cm-tab" role="presentation" cm-text="	"> </span>字段类型<span class="cm-tab" role="presentation" cm-text="	">    </span>[字段属性]]...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)[ engine [=]{innodb|myisam} default charset [=]字符集 collation [=]校对集];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> student (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  name<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) <span class="cm-string-2">charset</span> utf8;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><strong><span>1.2 复制已有表结构</span></strong><span>：</span></p><p><span>复制已有表结构，只复制表结构，如果表中有数据是不会复制数据过来的。被复制的表不一定要在当前数据库内，只要使用数据库名.表名就可以在任何数据库下访问其他数据的表。</span></p><p><span>语法：</span><strong><span>create table 新表名 like 表名;</span></strong></p><h4><a name="2-查看" class="md-header-anchor"></a><span>2. 查看</span></h4><p><span>每当一张数据表创建创建，就会在对应的数据库目录下创建一些文件，这些文件与存储引擎有关，在我的电脑上每个表都有 .frm 结构文件和 .ibd 文件，.frm 结构文件来自 innodb 存储引擎，innodb 存储引擎存储的所有数据文件都在外部的 ibdata 文件中。</span></p><p><strong><span>2.1 查看所有表</span></strong><span>：</span></p><p><span>语法：</span><strong><span>show tables;</span></strong></p><p><strong><span>2.2 查看匹配表</span></strong><span>：</span></p><p><span>语法：</span><strong><span>show tables like &#39;匹配模式&#39;;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">tables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%t%'</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><strong><span>2.3 查看表结构</span></strong><span>：</span></p><p><span>语法：</span></p><ul><li><strong><span>desc 表名;</span></strong></li><li><strong><span>describe 表名;</span></strong></li><li><strong><span>show colums from 表名;</span></strong></li></ul><p><span>虽然有三种方式，但是作用是一模一样的。</span></p><p><span>表结构如下：</span></p><p><img src='./Resources/MySQL_Resources/表结构.png' alt='表结构' referrerPolicy='no-referrer' /></p><figure><table><thead><tr><th><span>列</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>Field</span></td><td><span>字段名</span></td></tr><tr><td><span>Type</span></td><td><span>字段类型</span></td></tr><tr><td><span>Null</span></td><td><span>值是否允许为空，YES 表示允许为空</span></td></tr><tr><td><span>Key</span></td><td><span>索引</span></td></tr><tr><td><span>Default</span></td><td><span>如果没有指定值的话，就使用默认值，NULL 表示默认为 NULL</span></td></tr><tr><td><span>Extra</span></td><td><span>额外属性</span></td></tr></tbody></table></figure><p><strong><span>2.4 查看表创建语句</span></strong><span>：</span></p><p><span>语法：</span><strong><span>show create table 表名;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> student;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h4><a name="3-修改" class="md-header-anchor"></a><span>3. 修改</span></h4><p><strong><span>3.1 修改表选项</span></strong><span>：</span></p><p><span>语法：</span><strong><span>alter table 表名 表选项=值;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改表选项</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> student <span class="cm-string-2">charset</span> utf8;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>不要轻易修改表选项，特别是引擎和校对集。</span></p><p><strong><span>3.2 修改表名</span></strong><span>：</span></p><p><span>语法：</span><strong><span>rename table 旧表名 to 新表名;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改表名</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">rename</span> <span class="cm-keyword">table</span> student <span class="cm-keyword">to</span> mydb_student;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><strong><span>3.3 修改表结构</span></strong><span>：</span></p><p><span>语法：</span></p><ul><li><p><span>新增字段：</span><strong><span>alter table 表名 add [column] 新字段名 字段类型 [列属性] [first|after 字段名];</span></strong></p></li><li><p><span>删除字段：</span><strong><span>alter table 表名 drop 字段名;</span></strong></p></li><li><p><span>修改字段（其实就两类，有一类可以附带修改字段名就是 change，有一类不能就是 modify，其他都一样，修改字段名的也能顺带将字段类型/属性给修改了）：</span></p><ul><li><span>修改字段名：</span><strong><span>alter table 表名 change 旧字段名 新字段名 字段类型 [列属性] [first|after 字段名];</span></strong></li><li><span>修改字段类型/属性：</span><strong><span>alter table 表名 modify 字段名 新类型 [新属性] [first|after 字段名];</span></strong></li></ul></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 新增字段</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">add</span> <span class="cm-keyword">column</span> age <span class="cm-builtin">int</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 新增字段到最前</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">add</span> id <span class="cm-builtin">int</span> <span class="cm-keyword">first</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改字段名。注意，字段类型不会沿用，一定要指定字段类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">change</span> age suishu <span class="cm-builtin">int</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改字段类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">modify</span> name <span class="cm-builtin">varchar</span>(<span class="cm-number">15</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">drop</span> suishu;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改字段位置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">add</span> age <span class="cm-builtin">int</span> <span class="cm-keyword">first</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> mydb_student <span class="cm-keyword">change</span> age age <span class="cm-builtin">int</span> <span class="cm-keyword">after</span> name;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><h4><a name="4-删除" class="md-header-anchor"></a><span>4. 删除</span></h4><p><span>语法：</span><strong><span>drop table 表名[, 其他表名]...;</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除表</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">table</span> mydb_student;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除多个表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">table</span> class, teacher;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><h3><a name="三）数据" class="md-header-anchor"></a><span>（三）数据</span></h3><h4><a name="1-插入" class="md-header-anchor"></a><span>1. 插入</span></h4><p><span>语法：</span></p><ul><li><strong><span>insert into 表名 values(表结构字段值);</span></strong></li><li><strong><span>insert into 表名[字段列表] values(对应字段列表值);</span></strong></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 插入数据，这种情况一定要和表结构定义的字段顺序一致</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_teacher <span class="cm-keyword">values</span>(<span class="cm-string">'Jack'</span>, <span class="cm-number">30</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 插入数据，这种情况不需要和表结构定义字段顺序一致，和表名后面括号中书写顺序对应即可</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_teacher(age, name) <span class="cm-keyword">values</span>(<span class="cm-number">30</span>, <span class="cm-string">'Tom'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 插入数据，并不一定要插入所有数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_teacher(name) <span class="cm-keyword">values</span>(<span class="cm-string">'Han'</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><h4><a name="2-查询" class="md-header-anchor"></a><span>2. 查询</span></h4><p><span>语法：</span></p><ul><li><strong><span>select * from 表名;</span></strong></li><li><strong><span>select 字段列表 from 表名;</span></strong></li><li><strong><span>select {*/字段列表} from 表名 where 字段名=值;</span></strong></li><li><strong><span>select 字段1 [as] 别名1[, 字段2 [as] 别名2]... from 表名 where 字段名=值;</span></strong></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查询所有数据</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_teacher;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查询指定列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> name <span class="cm-keyword">from</span> my_teacher;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> age, name <span class="cm-keyword">from</span> my_teacher;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查询指定列并重新命名列名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> name <span class="cm-keyword">as</span> 姓名, age 年龄 <span class="cm-keyword">from</span> my_teacher;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 按条件查询，注意判断相等是用“=”，判断是否为 NULL 要用 is</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> name 姓名, age 年龄 <span class="cm-keyword">from</span> my_teacher <span class="cm-keyword">where</span> age=<span class="cm-number">30</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> name 姓名, age 年龄 <span class="cm-keyword">from</span> my_teacher <span class="cm-keyword">where</span> age <span class="cm-keyword">is</span> <span class="cm-atom">null</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><h4><a name="3-删除" class="md-header-anchor"></a><span>3. 删除</span></h4><p><span>语法：</span><strong><code>delete from 表名[ where 字段名=值];</code></strong></p><p><span>如果没有 where，则意味着清空表，一定要慎用！</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 没有主键在安全模式下无法删除，需要先设置关闭安全模式</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> sql_safe_updates=<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除某些</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> my_teacher <span class="cm-keyword">where</span> age <span class="cm-keyword">is</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除所有</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> my_teacher;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><h4><a name="4-修改" class="md-header-anchor"></a><span>4. 修改</span></h4><p><span>修改操作通常是修改部分字段数据，而不会全部修改！</span></p><p><span>语法：</span><strong><code>update 表名 set 字段名=新值[ where 字段名=值];</code></strong></p><p><span>如果没有 where，则所有这个字段的值都会被修改为统一值，一定要慎用！</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> my_teacher <span class="cm-keyword">set</span> age=<span class="cm-number">28</span> <span class="cm-keyword">where</span> name=<span class="cm-string">'Han'</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h2><a name="三高级操作" class="md-header-anchor"></a><span>三、高级操作</span></h2><h3><a name="一）新增数据" class="md-header-anchor"></a><span>（一）新增数据</span></h3><h4><a name="1-多数据插入" class="md-header-anchor"></a><span>1. 多数据插入</span></h4><p><span>语法：</span><strong><span>insert into table_name [(字段列表)] values (值列表)[,(值列表)]...</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> user_info (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>username <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  age <span class="cm-builtin">int</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> user_info(username, age) <span class="cm-keyword">values</span>(<span class="cm-string">'zhangsan'</span>, <span class="cm-number">24</span>), (<span class="cm-string">'lisi'</span>, <span class="cm-number">21</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h4><a name="2-主键冲突" class="md-header-anchor"></a><span>2. 主键冲突</span></h4><p><span>表使用业务主键，在插入的时候不确定是否已经有了对应数据。</span></p><p><span>主键冲突有两种解决方案：主键冲突更新、主键冲突替换。</span></p><h5><a name="21-主键冲突更新" class="md-header-anchor"></a><span>2.1 主键冲突更新</span></h5><p><span>类似插入数据语法，如果插入过程中主键冲突，则采用更新方法。</span></p><p><span>语法：</span><strong><span>insert into table_name [(字段列表)] values (值列表) on duplicate key upate 字段=新值</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> student_info (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>stu_id <span class="cm-builtin">varchar</span>(<span class="cm-number">7</span>) <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>stu_name <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> student_info <span class="cm-keyword">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0001'</span>, <span class="cm-string">'一'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0002'</span>, <span class="cm-string">'二'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0003'</span>, <span class="cm-string">'三'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0004'</span>, <span class="cm-string">'四'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> student_info <span class="cm-keyword">values</span>(<span class="cm-string">'stu0004'</span>, <span class="cm-string">'人军'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 无法插入，会提示主键重复</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 主键冲突更新</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> student_info <span class="cm-keyword">values</span>(<span class="cm-string">'stu0004'</span>, <span class="cm-string">'人军'</span>) <span class="cm-keyword">on</span> duplicate <span class="cm-keyword">key</span> <span class="cm-keyword">update</span> stu_name=<span class="cm-string">'人军'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><p><span>有个缺点，如果要插入到数据很多，就比较麻烦，需要一条一条地写，效率很低。</span></p><h5><a name="22-主键冲突替换" class="md-header-anchor"></a><span>2.2 主键冲突替换</span></h5><p><span>语法：</span><strong><span>replace into [(字段列表)] value(值列表)</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 使用的2.1的表</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 无法插入</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> student_info <span class="cm-keyword">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0001'</span>, <span class="cm-string">'熊大'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0002'</span>, <span class="cm-string">'熊二'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 主键冲突替换</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">replace</span> <span class="cm-keyword">into</span> student_info <span class="cm-keyword">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0001'</span>, <span class="cm-string">'熊大'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'stu0002'</span>, <span class="cm-string">'熊二'</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><span>有个缺点，执行效率低。</span></p><h4><a name="3-蠕虫复制" class="md-header-anchor"></a><span>3. 蠕虫复制</span></h4><p><span>语法：</span><strong><span>insert into table_name[(字段列表)] select */字段列表 from other_table</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> mydatabase<span class="cm-variable-2">.warm_copy</span> (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>id <span class="cm-builtin">int</span> <span class="cm-keyword">zerofill</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  name <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> mydatabase<span class="cm-variable-2">.warm_copy</span>(name) <span class="cm-keyword">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'张三'</span>),(<span class="cm-string">'李四'</span>),(<span class="cm-string">'王五'</span>),(<span class="cm-string">'赵六'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 蠕虫复制</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> mydatabase<span class="cm-variable-2">.warm_copy</span>(name) <span class="cm-keyword">select</span> name <span class="cm-keyword">from</span> mydatabase<span class="cm-variable-2">.warm_copy</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><span>蠕虫复制的意义在于测试表的压力和表的效率（索引），只是在使用的时候一定要注意冲突。</span></p><p><span>蠕虫复制还有一个作用就是复制数据。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> mydatabase<span class="cm-variable-2">.warm_copy_copy</span> <span class="cm-keyword">like</span> mydatabase<span class="cm-variable-2">.warm_copy</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> mydatabase<span class="cm-variable-2">.warm_copy_copy</span>(name) <span class="cm-keyword">select</span> name <span class="cm-keyword">from</span> mydatabase<span class="cm-variable-2">.warm_copy</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>通过上面两张表就可以将一张表的结构以及数据都完整复制，常常用于将生产环境复制到开发环境。</span></p><h3><a name="二）更新数据" class="md-header-anchor"></a><span>（二）更新数据</span></h3><p><span>在更新数据的时候通常都是跟随条件进行更新的，也就是通常就是这种形式：</span><strong><span>update 表名 set 字段名=新值 where 判断条件</span></strong><span>。</span></p><p><span>如果没有条件的话，是全表更新。另外，可以使用 limit（关于 limit 的时候在后面有讲解）来限制更新的数量。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> mydatabase<span class="cm-variable-2">.warm_copy</span> <span class="cm-keyword">set</span> name=<span class="cm-string">'小明'</span> <span class="cm-keyword">where</span> name=<span class="cm-string">'张三'</span> <span class="cm-keyword">limit</span> <span class="cm-number">4</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 将所有 name 为张三的前四条记录的 name 修改为小明</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3><a name="三）删除数据" class="md-header-anchor"></a><span>（三）删除数据</span></h3><p><span>和更新数据差不多，通常形式：</span><strong><span>delete from 表名 where 判断条件</span></strong><span>。</span></p><p><span>如果没有条件的话，是全部删除。另外，同样可以使用 limit 来限制删除的数量。</span></p><p><span>还需要注意的是，清空数据不会重置 anto_increment。如果想要重置 auto_increment 为1的话，可以使用 </span><strong><span>truncate</span></strong><span>。</span></p><p><span>基本语法：</span><strong><span>truncate 表名</span></strong><span>，其本质就是 drop-&gt;create。</span></p><p><span>其实还是可以</span><strong><span>alter table 表名 auto_increment 1</span></strong><span>。</span></p><h3><a name="四）高级查询" class="md-header-anchor"></a><span>（四）高级查询</span></h3><p><span>首先，一个完整的查询指令：</span></p><p><strong><span>select select选项 *|(字段列表) from 数据源 where条件 group by条件 having条件 order by排序 limit限制</span></strong><span>。</span></p><p><span>从 where 条件开始被称为查询五子句。</span></p><h4><a name="1-select-选项" class="md-header-anchor"></a><span>1. select 选项</span></h4><p><span>有两个值：all、distincat。</span></p><p><span>all 为默认，一般都没写，表示保留所有查询出来的记录。distinct 为去重，表示去除所有重复的记录，重复要求的是</span><strong><span>完全一致，也就是所有字段的值都一样</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> selectTest(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>username <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> selectTest <span class="cm-keyword">values</span>(<span class="cm-string">'a'</span>), (<span class="cm-string">'b'</span>), (<span class="cm-string">'c'</span>), (<span class="cm-string">'d'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> selectTest <span class="cm-keyword">select</span> username <span class="cm-keyword">from</span> selectTest;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">all</span> * <span class="cm-keyword">from</span> selectTest;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 只会输出4条记录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">distinct</span> * <span class="cm-keyword">from</span> selectTest;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><h4><a name="2-字段列表" class="md-header-anchor"></a><span>2. 字段列表</span></h4><p><span>有的时候想要从多张表中获取数据，在获取数据的时候，可能存在不同表中有同名的字段，可以通过 </span><strong><span>as</span></strong><span> 来定义别名。</span></p><p><span>语法：</span><strong><span>字段名 [as] 别名</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> table1(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>name <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> table1 <span class="cm-keyword">values</span>(<span class="cm-string">'a'</span>), (<span class="cm-string">'b'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> table2(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>name <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> table2 <span class="cm-keyword">values</span>(<span class="cm-string">'c'</span>), (<span class="cm-string">'d'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> table1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> table2;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这里能查询出来四条记录，是组合数据，可以加上 distinct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 其实这里用到了多表查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> table1<span class="cm-variable-2">.name</span> <span class="cm-keyword">as</span> name1, table2<span class="cm-variable-2">.name</span> name2 <span class="cm-keyword">from</span> table1, table2;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><h4><a name="3-数据源" class="md-header-anchor"></a><span>3. 数据源</span></h4><p><span>数据源就是查询的数据的来源，不一定非要是一个具体存在的表，只要是复合二位表结构的数据都可以。</span></p><h5><a name="31-单表" class="md-header-anchor"></a><span>3.1 单表</span></h5><p><span>格式：</span><strong><span>from 表名</span></strong><span>。</span></p><h5><a name="32-多表" class="md-header-anchor"></a><span>3.2 多表</span></h5><p><span>格式：</span><strong><span>from 表名1, 表名2, ...</span></strong><span>。</span></p><p><strong><span>多张表组合查询的话，其本质是多张表会拼凑形成一张表，之后对这一张表进行查询</span></strong><span>，在数学上叫做</span><strong><span>笛卡尔积</span></strong><span>。其对于数据库来说除了造成压力，没有其他意义，所以尽量少用。对于最后拼凑形成的这一张表来说，需要注意：</span></p><ul><li><p><span>这张表有多少列？</span><strong><span>这张表的列数就是所有表的列数之和</span></strong><span>。</span></p><ul><li><span>假设两张表。第一张表有 name、age 两个字段。第二张表有 name、salary 两个字段。那么组合的一张表有四个字段，分别是来自第一张表的 name 和 age 与来自第二张表的 name 和 salary 共四个字段。两个同名的 name 字段可以通过“表名.字段名” 来获取值。</span></li><li><span>例如：</span><code>select table1.name as name1, table2.name name2 from table1, table2;</code><span>。</span></li></ul></li><li><p><span>这张表有多少条记录？</span><strong><span>这张表拥有的记录就是所有表拥有记录的乘积</span></strong><span>。</span></p><ul><li><span>假设同上，第一张表有4条记录，第二张表有4条记录，那么总共就会有16条记录。可以使用 distinct 来去掉重复项。</span></li><li><span>例如：</span><code>select distinct table1.name as name1, table2.name name2 from table1, table2;</code><span>。</span></li></ul></li></ul><h5><a name="33-动态数据" class="md-header-anchor"></a><span>3.3 动态数据</span></h5><p><span>数据来源并不是一张实体表，而是从表中查询到的数据形成的二维结果表（子查询）。</span></p><p><span>语法：</span><strong><span>from (select *|字段列表 from 表名) [as] 别名</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> users (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>username <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">password</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> users <span class="cm-keyword">values</span>(<span class="cm-string">'admin'</span>, <span class="cm-string">'admin'</span>), (<span class="cm-string">'zhangsan'</span>, <span class="cm-string">'test'</span>), (<span class="cm-string">'lisi'</span>, <span class="cm-string">'test'</span>), (<span class="cm-string">'wangwu'</span>, <span class="cm-string">'lalala'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> users;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- as 可以加也可以不加，但是加上比较好</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> username <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> users) <span class="cm-keyword">as</span> sub <span class="cm-keyword">where</span> <span class="cm-keyword">password</span>=<span class="cm-string">'test'</span> <span class="cm-keyword">or</span> <span class="cm-keyword">password</span>=<span class="cm-string">'admin'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><h4><a name="4-where-条件" class="md-header-anchor"></a><span>4. where 条件</span></h4><p><span>where 用于从数据表中获取数据的时候以特定条件进行筛选。</span></p><p><span>原理：从磁盘一条一条获取数据的时候，where 就对拿到的每一条数据进行判断，判断是否符合条件，如果符合就保存下来放到内存中，如果不符合就直接舍弃掉。</span></p><p><span>where 是通过运算符进行结果比较来判断数据。</span></p><h4><a name="5-group-by-条件" class="md-header-anchor"></a><span>5. group by 条件</span></h4><p><span>group by 表示分组的含义，根据指定的字段对数据进行分组。</span><strong><span>分组的目的是为了统计，如果只是想要查看数据的话用 group by 是没有意义的。因为 group by 将数据按照指定的字段分组之后只会保留每组的第一条记录</span></strong><span>。</span></p><p><span>如果要进行统计，就需要利用统计函数（聚合函数）：</span></p><ul><li><p><span>count()：统计每组中的数量，如果统计目标为字段，那么不统计为 NULL 的字段。</span></p><ul><li><span>count(*)：代表统计记录数。</span></li></ul></li><li><p><span>avg()：求平均值。</span></p></li><li><p><span>sum()：求和。</span></p></li><li><p><span>max()：求最大值。</span></p></li><li><p><span>min()：求最小值。</span></p></li></ul><p><span>另外</span><strong><span>还有一个 group_concat() 可以将对应的数据拼凑起来</span></strong><span>。例如，分组之后只会显示一组的第一条数据，那么可以使用这个函数将需要显示的数据拼凑为一条记录的一个字段显示出来。</span></p><h5><a name="51-分组统计" class="md-header-anchor"></a><span>5.1 分组统计</span></h5><p><span>基本语法：</span><strong><span>group by 字段名</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_student (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>class_id <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>stu_name <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  stu_age <span class="cm-builtin">tinyint</span> <span class="cm-builtin">unsigned</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  stu_height <span class="cm-builtin">tinyint</span> <span class="cm-builtin">unsigned</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_student <span class="cm-keyword">values</span>(<span class="cm-string">'class_01'</span>, <span class="cm-string">'zhangsan'</span>, <span class="cm-number">20</span>, <span class="cm-number">175</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_01'</span>, <span class="cm-string">'lisi'</span>, <span class="cm-number">21</span>, <span class="cm-number">174</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_01'</span>, <span class="cm-string">'wangwu'</span>, <span class="cm-number">20</span>, <span class="cm-number">180</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_01'</span>, <span class="cm-string">'zhaoliu'</span>, <span class="cm-number">19</span>, <span class="cm-number">168</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_student <span class="cm-keyword">values</span>(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xiongda'</span>, <span class="cm-number">21</span>, <span class="cm-number">166</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xionger'</span>, <span class="cm-number">20</span>, <span class="cm-number">190</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xiaoqi'</span>, <span class="cm-number">19</span>, <span class="cm-number">188</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xiaoqian'</span>, <span class="cm-number">18</span>, <span class="cm-number">168</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 按照班级统计每班人数、最大年龄、最矮身高、平均年龄</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, <span class="cm-keyword">count</span>(*), <span class="cm-keyword">max</span>(stu_age), <span class="cm-keyword">min</span>(stu_height), <span class="cm-keyword">avg</span>(stu_age) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 将姓名拼接放在一条记录的一个字段中</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, <span class="cm-keyword">group_concat</span>(stu_name), <span class="cm-keyword">count</span>(*), <span class="cm-keyword">max</span>(stu_age), <span class="cm-keyword">min</span>(stu_height), <span class="cm-keyword">avg</span>(stu_age) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 552px;"></div><div class="CodeMirror-gutters" style="display: none; height: 552px;"></div></div></div></pre><h5><a name="52-多分组" class="md-header-anchor"></a><span>5.2 多分组</span></h5><p><span>对已经分组的数据再次进行分组。</span></p><p><span>语法：</span><strong><span>group by 字段1, 字段2[, 字段3]...</span></strong><span>，意思是先按照字段1进行分组，之后将结果再按照字段2进行分组，以此类推，放在前面的字段先分组。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 先按照班级分组，之后按照性别分组</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, gendar, <span class="cm-keyword">count</span>(*), <span class="cm-keyword">group_concat</span>(stu_name) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id, gendar;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h5><a name="53-分组排序" class="md-header-anchor"></a><span>5.3 分组排序</span></h5><p><span>MySQL 分组默认有排序功能，会按照分组字段进行排序，默认是升序，可以改变。</span></p><p><span>基本语法：</span><strong><span>group by 字段 [asc|desc]</span></strong><span>，asc 为升序，desc 为降序。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 先按照班级分组，之后按照性别分组，班级升序，性别降序</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, gendar, <span class="cm-keyword">count</span>(*), <span class="cm-keyword">group_concat</span>(stu_name) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id, gendar <span class="cm-keyword">desc</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h5><a name="54-回溯统计" class="md-header-anchor"></a><span>5.4 回溯统计</span></h5><p><span>当进行多分组后，往上统计的过程中，需要进行层层上报，将这种层层上报统计的过程称为回溯统计。每一次分组向上统计的过程都会产生一次新的统计数据，而且统计数据对应的分组字段为 NULL。</span></p><p><span>基本语法：</span><strong><span>group by 字段 [asc|desc] with rollup</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, <span class="cm-keyword">count</span>(*) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id <span class="cm-keyword">with</span> <span class="cm-keyword">rollup</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">class_id<span class="cm-tab" role="presentation" cm-text="	">    </span>count(*)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">1<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">2<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">NULL<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">这里进行了一次分组，是按照 class_id 进行分组的，回溯统计就会将统计信息上报，统计的是 class_id 为1和 class_id 为2的数据，所以 class_id 为 NULL，总共6个人。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, <span class="cm-keyword">count</span>(*) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id, gendar <span class="cm-keyword">with</span> <span class="cm-keyword">rollup</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">class_id<span class="cm-tab" role="presentation" cm-text="	">    </span>gendar<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span>count(*)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">1<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>男<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">1<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>女<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">1<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>NULL<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">2<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>男<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">2<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>女<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">2<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>NULL<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">NULL<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>NULL<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">这里进行了两次分组，分别是按照 class_id 和 gendar 进行的分组。最底层是 gendar，所以可以看到16和19都是对 gender 的统计，最后的20行是对 class_id 的统计。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 575px;"></div><div class="CodeMirror-gutters" style="display: none; height: 575px;"></div></div></div></pre><h4><a name="6-having-条件" class="md-header-anchor"></a><span>6. having 条件</span></h4><p><span>having 的本质和 where 一样，是用来对数据进行条件筛选的，区别如下：</span></p><ul><li><strong><span>having 在 group by 子句之后，可以针对分组进行统计筛选</span></strong><span>，但是 where 不行。</span></li><li><span>where 不能使用聚合函数。因为聚合函数是用在 group by 分组的时候，但是此时 where 已经运行完毕了。</span></li><li><strong><span>having 是在 group by 之后，可以使用聚合函数或者字段别名</span></strong><span>。而 where 是从位于磁盘中的表取数据，使用的是字段名，而别名是在数据进入到内存之后才能使用的。</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查询人数大于等于4的班级</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, <span class="cm-keyword">count</span>(*) <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id <span class="cm-keyword">having</span> <span class="cm-keyword">count</span>(*)&gt;=<span class="cm-number">4</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这里使用到了别名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_id, <span class="cm-keyword">count</span>(*) <span class="cm-keyword">as</span> stu_total <span class="cm-keyword">from</span> my_student <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id <span class="cm-keyword">having</span> stu_total&gt;=<span class="cm-number">4</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 其实可以这么说，where 能进行的操作 having 都能做，但是 having 能进行的操作 where 不一定都能进行</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p><strong><span>强调：having 是在 group by 之后，group by 是在 where 之后。where 的时候是将数据从磁盘拿到内存，where 之后的所有操作都是在内存中进行的操作</span></strong><span>。</span></p><h4><a name="7-order-by-排序" class="md-header-anchor"></a><span>7. order by 排序</span></h4><p><span>order by 是根据校对规则对数据进行排序。</span></p><p><span>基本语法：</span><strong><span>order by 字段 [asc|desc]</span></strong><span>，默认为 asc 升序。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 身高从高到低排序</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>order by 也可以像 group by 一样进行多字段排序，会先按照第一个字段进行排序，排序后的结果再按照第二个字段进行排序，以此类推。</span></p><p><span>基本语法：</span><strong><span>order by 字段1, 字段2[, 字段3]...</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 先降序排班级，再升序排身高</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> class_id <span class="cm-keyword">desc</span>, stu_height</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h4><a name="8-limit-限制" class="md-header-anchor"></a><span>8. limit 限制</span></h4><p><span>limit 主要用于限制记录的数量的获取</span></p><h5><a name="81-记录数限制" class="md-header-anchor"></a><span>8.1 记录数限制</span></h5><p><span>基本语法：</span><strong><span>limit 数量</span></strong><span>，表示从第一数据开始获取，要获取多少条数据。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查看前两条记录</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">limit</span> <span class="cm-number">2</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h5><a name="82-分页" class="md-header-anchor"></a><span>8.2 分页</span></h5><p><span>limit 最经常的用法就是分页。</span></p><p><span>基本语法：</span><strong><span>limit 开始下标, 数量</span></strong><span>，下标从0开始。</span></p><p><span>一般来说分页可以这么写：</span><strong><span>limit ((pageNumber-1)</span><span>*</span><span>pageSize), pageSize</span></strong><span>。</span></p><p><span>那么怎么计算总共有多少页呢，可以这么算：</span><strong><span>((count(*)-1)/pageSize)+1</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 第一页：limit 0, 2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 第二页：limit 2, 2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 第三页：limit 4, 2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">limit</span> <span class="cm-number">0</span>, <span class="cm-number">2</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3><a name="五）联合查询" class="md-header-anchor"></a><span>（五）联合查询</span></h3><p><span>联合查询就是将多个查询的结果合并到一起（纵向），字段数不变。</span></p><p><span>应用场景：</span></p><ul><li><span>要得到查询结果需要对一张表进行多次查询才可以，这时候就可以使用联合查询将查询数据放到一起。</span></li><li><span>更常见的应用场景是表的数据过多，对表进行了分表操作，之后需要将不同表的数据放到一起显示，或将统计信息放到一起显示。</span></li></ul><p><span>基本语法：</span><strong><span>select语句 union [distinct|all] select语句</span></strong><span>，默认 distinct。</span></p><p><span>规定：</span></p><ul><li><span>联合查询中要使用 order by 的话，则所有 select 语句必须用括号括起来。</span></li><li><span>如果想要 order by 生效的话，还需要使用 limit，limit 的数量大于表的数量即可。</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gender=<span class="cm-string">'男'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'女'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'男'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">union</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'女'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这条语句没问题，表前部分显示男学生信息，表后部分显示女学生信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'男'</span> <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">union</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'女'</span> <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这条语句中的 select 如果不用括号括起来就会报错，但是 order by 没有生效</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'男'</span> <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">limit</span> <span class="cm-number">30</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">union</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar=<span class="cm-string">'女'</span> <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span> <span class="cm-keyword">limit</span> <span class="cm-number">30</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 如果想要生效，则必须加上 limit，limit 的值手动指定，指定一个较大的能包含所有结果的值</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><p><span>另外有一点需要注意的是，在理论上，只要保证 union 的 select 查询出来的字段数一样，不需要拿到的数据和对应字段类型一致。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> stu_id, stu_name, stu_height <span class="cm-keyword">from</span> my_student</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">union</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> stu_height, stu_id, stu_name <span class="cm-keyword">from</span> my_studnet;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 都是三列，只是三列数据类型不一致，但是还是可以输出的，输出字段名是保留的第一个select的字段名</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3><a name="六）连接查询" class="md-header-anchor"></a><span>（六）连接查询</span></h3><p><span>将多张表连到一起来进行查询，会导致记录数和字段数发生改变。</span></p><p><span>连接查询的意义在于，表与表之间存在很多联系，例如一对一、一对多、多对多。通常在实际操作中，需要利用这层关系来保证数据的完整性，这就用到了连接查询了。</span></p><p><span>连接查询分类：</span></p><ul><li><p><span>交叉连接</span></p></li><li><p><span>内连接</span></p></li><li><p><span>外连接</span></p><ul><li><span>左外连接（左连接）</span></li><li><span>右外连接（右连接）</span></li></ul></li><li><p><span>自然连接</span></p></li></ul><h4><a name="1-交叉连接" class="md-header-anchor"></a><span>1. 交叉连接</span></h4><p><span>原理：每取出第一张表的一条记录就与第二张表的全部记录挨个匹配，直到第一张表取完。最终得到的字段为两表字段，最终得到的字段数为两表字段数之和，最终得到的记录数为两表记录数之积。</span></p><p><span>基本语法：</span><strong><span>表1 cross join 表2</span></strong><span>，其实就是之前多表查询（from 表1, 表2）的时候提到的笛卡尔积。</span></p><h4><a name="2-内连接" class="md-header-anchor"></a><span>2. 内连接</span></h4><p><span>原理：每取出第一张表的一条记录就与第二张表的全部记录挨个匹配，如果满足条件就保留，如果不满足条件就丢弃，如果第一张表中的一条记录在第二张表没有一条匹配到，那么这条记录也不会被保留。最终得到的字段为两表字段，最终得到的字段数为两表字段数之和。</span></p><p><span>基本语法：</span><strong><span>表1 [inner] join 表2 [on 匹配条件]</span></strong><span>。</span></p><p><span>注意：</span></p><ul><li><span>如果没有 on 来规定匹配条件，就相当于交叉连接。</span></li><li><span>on 不是必须的，所以可以用 where 来替代，最终结果是一样的，不过建议使用 on，因为 where 是都匹配完了，得到了所有数据之后才又来进行一次筛选，做了无用功。</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">as</span> s <span class="cm-keyword">inner</span> <span class="cm-keyword">join</span> my_class c <span class="cm-keyword">on</span> s<span class="cm-variable-2">.class_id</span> = id;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 首先可以使用别名，as添加与否都可以。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 然后遇到重名字段名，可以通过“表名.字段名”来规避</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h4><a name="3-外连接" class="md-header-anchor"></a><span>3. 外连接</span></h4><p><span>原理：每取出第一张表的一条记录就与第二张表的全部记录挨个匹配，如果满足条件就保留，如果不满足条件就丢弃，如果第一张表的一条记录在第二张表中没有一条对应，那么就会保留第一张表的这条记录，而其他应该来自第二张表的数据就全部为 NULL。</span></p><p><strong><span>其实外连接和内连接基本一致，只是内连接如果第一张表中没有一条记录能在第二张表中匹配到，就不会保留，而外连接会保留，只是应该来自第二张表的数据全部为 NULL 而已</span></strong><span>。</span></p><p><span>外连接分为两种：</span></p><ul><li><span>左外连接（左连接）</span></li><li><span>右外连接（右连接）</span></li></ul><p><span>基本语法：</span></p><ul><li><span>左连接：</span><strong><span>主表 left join 从表 [on 匹配条件]</span></strong><span>，on 和内连接一致。</span></li><li><span>右连接：</span><strong><span>从表 right join 主表 [on 匹配条件]</span></strong><span>，on 和内连接一致。</span></li></ul><p><strong><span>同内连接一样，可以使用别名和可以通过“表名.字段名”来规避字段名相同的情况</span></strong><span>。</span></p><p><span>左连接和右连接只有一个区别：左连接主表数据在左边，右连接主表数据在右边。除此之外就没区别了，左连接和右连接可以互换，所以常用左连接。</span></p><h4><a name="4-using" class="md-header-anchor"></a><span>4. using</span></h4><p><span>在连接查询中用来代替 on 关键字进行条件匹配的，不过</span><strong><span>其只会匹配列名一致且值相等的情况，而不会匹配其他情况。如果使用了 using 关键字的话，同名字段就只会保留一个，且会放在查询结果的第一个字段</span></strong><span>。</span></p><p><span>基本语法：</span><strong><span>表1 join 表2 using(同名字段1[, 同名字段2]...)</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">left</span> <span class="cm-keyword">join</span> my_class <span class="cm-keyword">on</span> my_student<span class="cm-variable-2">.class_id</span>=my_class<span class="cm-variable-2">.class_id</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 上面这种情况就可以使用using来代替on</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">left</span> <span class="cm-keyword">join</span> my_class <span class="cm-keyword">using</span>(class_id);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 也就是两张表使用同名字段且要查询的是相等的情况下使用using代替on</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3><a name="七）子查询" class="md-header-anchor"></a><span>（七）子查询</span></h3><p><span>子查询是</span><strong><span>嵌套查询下层程序模块</span></strong><span>。通俗讲，一条 select 语句中嵌入了另外一条 select 语句，那么被嵌入的查询称之为子查询。</span></p><p><span>按功能分类：</span></p><ul><li><span>标量子查询：子查询返回的结果是一个数据（一行一列）</span></li><li><span>列子查询：子查询返回的结果是一列数据（一列多行）</span></li><li><span>行子查询：子查询返回的结果是一行数据（一行多列）</span></li><li><span>表子查询：子查询返回的结果是表数据（多行多列）</span></li><li><span>exists 子查询：返回的结果是1或者0（MySQL 没有布尔操作，可以使用这个子查询实现布尔功能）</span></li></ul><p><span>按使用分类：</span></p><ul><li><span>where 子查询，子查询作为条件。注意：where 1 永远为真</span></li><li><span>from 子查询，子查询作为数据源</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 标量子查询</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 知道一个学生的名字叫小猪，想知道他所在的班级的名字</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_name <span class="cm-keyword">from</span> my_class <span class="cm-keyword">where</span> class_id = (<span class="cm-keyword">select</span> class_id <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> stu_name=<span class="cm-string">'小猪'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- -------------------------------- 分割线 --------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 列子查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 获取已经有学生的所有班级的名字</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> class_name <span class="cm-keyword">from</span> my_class <span class="cm-keyword">where</span> class_id <span class="cm-keyword">in</span> (<span class="cm-keyword">select</span> <span class="cm-keyword">distinct</span> class_id <span class="cm-keyword">from</span> my_student);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- -------------------------------- 分割线 --------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 行子查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 获取班级年龄最大且身高最高的学生</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> (stu_age, stu_height) = (<span class="cm-keyword">select</span> <span class="cm-keyword">max</span>(stu_age), <span class="cm-keyword">max</span>(stu_height) <span class="cm-keyword">from</span> my_student);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这里最重要的就是构造行元素：(stu_age, stu_height)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 另外一条非常重要，有助于理解的，但是是错误的语句：select * from my_student having stu_age=max(stu_age) and stu_height=max(stu_height);</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 为什么有错：1. having 在 group by 之后执行，使用 having 代表前面执行了一次 group by（聚合函数也只能使用在 group by 之后）。2. group by 一旦执行，结果就只会返回一行，也就是第一行。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 前面三个都属于 where 子查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- -------------------------------- 分割线 --------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 后面的就是 from 子查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 表子查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 表子查询和行子查询非常相似，只是行子查询需要产生行元素，而表子查询不需要</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 表子查询和行子查询最重要的区别就是一个是在 where，一个在 from。表子查询其实就是改变了主查询的数据来源，主查询后面该使用 where、group by 等都可以</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 同样有错误：select * from my_student group by class_id having stu_height=max(stu_height);</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- group by 之后，只剩下第一行的数据，所以需要这么做：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span> <span class="cm-keyword">limit</span> <span class="cm-number">10</span>) <span class="cm-keyword">as</span> temp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 需要注意两点：1. 子查询一定要起别名。 2. order by 之后一定要 limit 限定，否则 order by 不起作用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- -------------------------------- 分割线 --------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- exists 查询</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 基本语法：where exists(查询语句)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 注意：where 1：永远为真</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 求出有学生在的所有班级</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_class <span class="cm-keyword">as</span> class <span class="cm-keyword">where</span> <span class="cm-keyword">exists</span>（select stu_id <span class="cm-keyword">from</span> my_student <span class="cm-keyword">as</span> student <span class="cm-keyword">where</span> student<span class="cm-variable-2">.class_id</span>=class<span class="cm-variable-2">.class_id</span>）;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 上面 select stu_id，只要有结果，exists 就会将其转换为1，也就是 true。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- -------------------------------- 辛酸史 --------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 下面的我怎么弄都不起作用，能排序，但是一 group by 之后就根本取的还是原表的第一行！</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">database</span> temp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> temp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> my_student (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>class_id <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>stu_name <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  stu_age <span class="cm-builtin">tinyint</span> <span class="cm-builtin">unsigned</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  stu_height <span class="cm-builtin">tinyint</span> <span class="cm-builtin">unsigned</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_student <span class="cm-keyword">values</span>(<span class="cm-string">'class_01'</span>, <span class="cm-string">'zhangsan'</span>, <span class="cm-number">20</span>, <span class="cm-number">175</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_01'</span>, <span class="cm-string">'lisi'</span>, <span class="cm-number">21</span>, <span class="cm-number">174</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_01'</span>, <span class="cm-string">'wangwu'</span>, <span class="cm-number">20</span>, <span class="cm-number">180</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_01'</span>, <span class="cm-string">'zhaoliu'</span>, <span class="cm-number">19</span>, <span class="cm-number">168</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> my_student <span class="cm-keyword">values</span>(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xiongda'</span>, <span class="cm-number">21</span>, <span class="cm-number">166</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xionger'</span>, <span class="cm-number">20</span>, <span class="cm-number">190</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xiaoqi'</span>, <span class="cm-number">19</span>, <span class="cm-number">188</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">'class_02'</span>, <span class="cm-string">'xiaoqian'</span>, <span class="cm-number">18</span>, <span class="cm-number">168</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_age <span class="cm-keyword">desc</span>) <span class="cm-keyword">as</span> temp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 找到原因了，如果 order by 要起作用，就必须要 limit 来限定，否则不会起作用，就和之前联合查询一样</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 下面是阐述：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 能起作用，但是一括号括起来，在 group by 就不起作用了（这里一定要注意给子查询起别名）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span>) <span class="cm-keyword">as</span> temp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 需要 limit 限定才能起作用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span> <span class="cm-keyword">limit</span> <span class="cm-number">10</span>) <span class="cm-keyword">as</span> temp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> class_id;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1909px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1909px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="八）数据备份与还原" class="md-header-anchor"></a><span>（八）数据备份与还原</span></h3><h3><a name="九）用户" class="md-header-anchor"></a><span>（九）用户</span></h3><p><span>MySQL 的用户信息存放再 mysql.user 中，这张表没有逻辑主键，但是有“Host”和“User”复合主键。</span></p><p><span>需要明确一点的就是，一个用户由用户名和主机地址共同组成，其书写形式为“&#39;用户名&#39;@&#39;主机地址&#39;”，其中单引号可以去掉，但是单引号不可以将“@”包括进去，否则整个引号就是用户名而没有主机地址了。</span></p><p><span>一个用户可以只书写用户名，如果只有用户名的话那么主机地址就默认为“%”了。</span></p><p><span>“</span><span>*</span><span>”和“%”如何选择：如果用引号包括的话则表明为字符串，那么就用“%”而不是“</span><span>*</span><span>”。</span></p><h4><a name="1-增加" class="md-header-anchor"></a><span>1. 增加</span></h4><p><span>两种：</span></p><ol start='' ><li><p><strong><code>create user username@host identified by &#39;明文密码&#39;;</code></strong></p><ol start='' ><li><span>简化创建（可以不写主机地址和密码）：</span><code>create user username</code><span>。这里主机地址默认为“%”，不需要密码就可以登录。</span></li></ol></li><li><p><span>使用 </span><code>insert</code><span> 语句直接插入数据到 mysql.user，但是不推荐。</span></p></li></ol><h4><a name="2-删除" class="md-header-anchor"></a><span>2. 删除</span></h4><p><span>基本语法：</span><strong><code>drop user username@host</code></strong></p><h4><a name="3-修改" class="md-header-anchor"></a><span>3. 修改</span></h4><p><span>MySQL 提供了多种修改方式，但是都会使用到 MySQL 提供的系统函数 </span><code>passowrd()</code><span>，需要使用该函数对明文密码进行加密处理。</span></p><p><span>两种：</span></p><ol start='' ><li><strong><code>set password for username@host=password(&#39;明文密码&#39;);</code></strong></li><li><strong><code>update mysql.user set password=password(&#39;明文密码&#39;) where User=&#39;username&#39; and Host=&#39;&#39;;</code></strong></li></ol><h3><a name="十）权限" class="md-header-anchor"></a><span>（十）权限</span></h3><p><span>权限包括三类：</span></p><ol start='' ><li><p><span>数据（5）</span></p><ol start='' ><li><span>insert</span></li><li><span>delete</span></li><li><span>update</span></li><li><span>select</span></li><li><span>file</span></li></ol></li><li><p><span>结构（12）</span></p><ol start='' ><li><span>create</span></li><li><span>drop</span></li><li><span>alter</span></li><li><span>index</span></li><li><span>create temporary tables</span></li><li><span>show view</span></li><li><span>create routine</span></li><li><span>alter routine</span></li><li><span>execute</span></li><li><span>create view</span></li><li><span>event</span></li><li><span>grigger</span></li></ol></li><li><p><span>权限（11）</span></p><ol start='' ><li><span>grant</span></li><li><span>super</span></li><li><span>process</span></li><li><span>reload</span></li><li><span>shutdown</span></li><li><span>show databases</span></li><li><span>lock tables</span></li><li><span>references</span></li><li><span>replication client</span></li><li><span>replication slave</span></li><li><span>create user</span></li></ol></li><li><p><span>特殊</span></p><ol start='' ><li><span>usage</span></li></ol></li></ol><p><strong><span>参考：</span></strong></p><ol start='' ><li><a href='https://blog.csdn.net/wulantian/article/details/38230635'><span>mysql grant 用户权限总结</span></a></li><li><a href='https://jingyan.baidu.com/article/455a9950a4fea0a16727787e.html'><span>mysql授权GRANT ALL PRIVILEGES</span></a></li><li><a href='https://www.cnblogs.com/crxis/p/7044582.html'><span>MySQL授权命令grant的使用方法</span></a></li><li><a href='https://blog.csdn.net/anzhen0429/article/details/78296814'><span>mysql grant 用户权限总结</span></a></li></ol><h4><a name="1-授予" class="md-header-anchor"></a><span>1. 授予</span></h4><p><span>基本语法：</span><strong><code>grant 权限列表 on database.table to username@host;</code></strong></p><ol start='' ><li><span>权限列表使用逗号分隔，还可以使用关键字 </span><code>all privileges</code><span> 表示授予所有权限。</span></li><li><span>数据库和表都可以使用“</span><span>*</span><span>”代替，如果是 </span><code>*.*</code><span> 则表示所有数据库的所有表。</span></li></ol><p><span>例子：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">grant</span> <span class="cm-keyword">select</span> <span class="cm-keyword">on</span> <span class="cm-variable-2">`mydb`</span>.<span class="cm-variable-2">`mytable_user`</span> <span class="cm-keyword">to</span> <span class="cm-string">'newuser'</span><span class="cm-variable-2">@'%'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 当 newuser@% 登录数据库之后就能看到 mydb 数据库，但只能看到其中的 mytable_user 表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">grant</span> <span class="cm-keyword">select</span> <span class="cm-keyword">on</span> <span class="cm-variable-2">`mydb`</span>.<span class="cm-variable-2">`mytable_user`</span> <span class="cm-keyword">to</span> <span class="cm-string">'newuser'</span><span class="cm-variable-2">@'%' identified by '123456'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 和上面泪痣，只是限定了所有登录 newuser 这个用户名但是密码为 123456 的用户</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><h4><a name="2-取消" class="md-header-anchor"></a><span>2. 取消</span></h4><p><span>基本语法：</span><strong><code>revoke 权限列表 on database.table from username@host;</code></strong></p><ol start='' ><li><span>权限列表使用逗号分隔，还可以使用关键字 </span><code>all privileges</code><span> 表示回收所有权限。</span></li><li><span>数据库和表都可以使用“</span><span>*</span><span>”代替，如果是 </span><code>*.*</code><span> 则表示所有数据库的所有表。</span></li></ol><h4><a name="3-刷新" class="md-header-anchor"></a><span>3. 刷新</span></h4><p><span>将当前对用户的权限操作进行刷新，将操作的具体内容同步到对应的表中。</span></p><p><span>基本语法：</span><strong><code>flush privileges;</code></strong></p><h3><a name="十一）找回密码" class="md-header-anchor"></a><span>（十一）找回密码</span></h3><p><span>如果 root 密码忘记了就需要找回或者重置 root 用户的密码：</span></p><ol start='' ><li><span>停止 MySQL 服务：net stop mysql</span></li><li><span>使用命令重新启动 MySQL 服务：mysqld.exe --skip-grant-tables</span></li><li><span>当前启动的服务器没有权限概念，非常危险，任何客户端不需要任何用户信息都可以直接登录，而且是 root 权限。例如，直接使用命令输入 </span><code>mysql</code><span> 就可以进入！</span></li><li><span>修改 root 用户的密码。</span></li><li><span>关闭 MySQL 服务：直接强制关闭即可。</span></li><li><span>重启 MySQL 服务：net start mysql。</span></li></ol><h3><a name="十二）外键" class="md-header-anchor"></a><span>（十二）外键</span></h3><p><span>A 表中保存的一个非主键字段是 B 表的主键，那么就称 A 中保存的这个字段为 A 的外键。A 为从表，B 表为主表。</span></p><p><strong><span>外键无法修改，只能删除之后重新创建。可以不指定外键名，MySQL 会自动指定一个外键名。另外，创建外键会默认创建一个索引，通过 desc 查看会看到 Key 字段有值 MUL 表示多索引。如果创建外键的之后指定了外键名，那么自动创建的普通索引的名字和外键名一致。如果创建外键之后没有指定外键名，那么自动创建的普通索引的名字和外键列名一致。</span></strong></p><p><strong><span>外键本身是一个索引，外键要求外键字段本身也是一种普通索引。</span></strong></p><h4><a name="1-外键要求" class="md-header-anchor"></a><span>1. 外键要求</span></h4><p><strong><span>外键字段需要保证与关联的主表的主键字段类型完全一致，基本属性也要相同。另外，外键只能使用 InnoDB 引擎，MyISAM 引擎不支持。</span></strong></p><h4><a name="2-外键约束" class="md-header-anchor"></a><span>2. 外键约束</span></h4><p><span>建立外键之后对主表和从表都会有一定的数据约束作用：</span></p><ol start='' ><li><span>从表不能在插入的记录中包括主表中不存在的数据。</span></li><li><span>主表不能删除被从表引用的记录。</span></li></ol><p><strong><span>两种操作：</span></strong></p><ol start='' ><li><span>delete</span></li><li><span>update</span></li></ol><p><strong><span>三种约束：</span></strong></p><ol start='' ><li><span>district：严格模式（默认）：不允许操作</span></li><li><span>cascade：级联模式：主表变化，从表数据跟着变化</span></li><li><span>set null：置空模式：主表变化，从表对应字段设置为 null，前提是从表对应字段允许设置为 null。</span></li></ol><h4><a name="3-增加操作" class="md-header-anchor"></a><span>3. 增加操作</span></h4><p><strong><span>建表增加：</span></strong></p><p><span>基本语法：</span><strong><span>所有字段后, [constraint </span><span>`</span><span>外键名</span><span>`</span><span>] foreign key (外键字段) references 主表(主表主键字段) [on delete|update cascade|set null]...</span></strong><span>，外键约束可以有多个，用空格间隔。</span></p><p><strong><span>表后增加：</span></strong></p><p><span>基本语法：</span><strong><span>alter table add [constraint </span><span>`</span><span>外键名</span><span>`</span><span>] foreign key (外键字段) references 主表(主表主键) [on delete|update cascade|set null]...</span></strong><span>，外键约束可以有多个，用空格间隔。</span></p><h4><a name="4-删除操作" class="md-header-anchor"></a><span>4. 删除操作</span></h4><p><span>基本语法：</span><strong><code>alter table 从表 drop foreign key 外键名</code></strong></p><p><span>注意，删除外键并不会删除 MySQL 自动创建的普通索引，如果要删除这个自动创建的普通索引：</span></p><p><strong><code>alter table 从表 drop index 索引名</code></strong></p><h4><a name="5-示例" class="md-header-anchor"></a><span>5. 示例</span></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t_class (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">`id`</span> <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">`name`</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_class <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'一班'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_class <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'二班'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_class <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'三班'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t_student (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">`id`</span> <span class="cm-builtin">int</span> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">`name`</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">16</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">`class_id`</span> <span class="cm-builtin">int</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> (<span class="cm-variable-2">`class_id`</span>) <span class="cm-keyword">references</span> <span class="cm-variable-2">`t_class`</span>(<span class="cm-variable-2">`id`</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 没有指定外键名，MySQL 会默认赋予一个外键名，普通索引名就为 class_id，也就是列名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_student <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'张三'</span>, <span class="cm-number">1</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 插入成功</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_student <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'王五'</span>, <span class="cm-number">1</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 插入成功</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_student <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'赵六'</span>, <span class="cm-number">1</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 插入成功</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_student <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'黄七'</span>, <span class="cm-number">1</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 插入成功</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_student <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'李四'</span>, <span class="cm-number">4</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 插入失败，因为主表没有 id 为4的记录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> t_class <span class="cm-keyword">where</span> <span class="cm-variable-2">`id`</span>=<span class="cm-number">1</span>;<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 删除失败，因为 id 为1的记录还在被从表引用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> t_class <span class="cm-keyword">where</span> <span class="cm-variable-2">`id`</span>=<span class="cm-number">2</span>;<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 删除成功</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> t_class <span class="cm-keyword">where</span> <span class="cm-variable-2">`id`</span>=<span class="cm-number">3</span>;<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 删除成功</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">mysql&gt; show create table t_student\G</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*************************** 1. row ***************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">Table: t_student</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">Create Table: CREATE TABLE `t_student` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`name` varchar(16) NOT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`class_id` int(11) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">KEY `class_id` (`class_id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">CONSTRAINT `t_student_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `t_class` (`id`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">1 row in set (0.00 sec)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除外键之前需要先 show create table t_student 查看默认赋予的外键名才好删除</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t_student <span class="cm-keyword">drop</span> <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-variable-2">`t_student_ibfk_1`</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 同样需要查看，不过就如之前所说，如果没有指定外键名的话，同时创建的普通索引名为对应的列名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t_student <span class="cm-keyword">drop</span> <span class="cm-keyword">index</span> <span class="cm-variable-2">`class_id`</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 表后重新添加自定义名字的外键，同时设置两个约束，约束之间用空格隔开即可</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t_student <span class="cm-keyword">add</span> <span class="cm-keyword">constraint</span> <span class="cm-variable-2">`student_class_id_ibfk_1`</span> <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> (<span class="cm-variable-2">`class_id`</span>) <span class="cm-keyword">references</span> t_class(<span class="cm-variable-2">`id`</span>) <span class="cm-keyword">on</span> <span class="cm-keyword">update</span> <span class="cm-keyword">cascade</span> <span class="cm-keyword">on</span> <span class="cm-keyword">delete</span> <span class="cm-keyword">set</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">mysql&gt; show create table t_student\G</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*************************** 1. row ***************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">Table: t_student</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">Create Table: CREATE TABLE `t_student` (</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`id` int(11) NOT NULL AUTO_INCREMENT,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`name` varchar(16) NOT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">`class_id` int(11) DEFAULT NULL,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">PRIMARY KEY (`id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">KEY `student_class_id_ibfk_1` (`class_id`),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">CONSTRAINT `student_class_id_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `t_class` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">CONSTRAINT `t_student_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `t_class` (`id`)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">1 row in set (0.00 sec)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 可以看到，如果创建外键的时候指定了外键名的话，默认创建的普通索引的名字和外键名一致</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1495px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1495px;"></div></div></div></pre><h3><a name="十三）视图" class="md-header-anchor"></a><span>（十三）视图</span></h3><p><span>视图的本质就是 SQL 语句，说得更具体点其实就是 select 语句。</span></p><p><span>创建出来的视图其实可以看做是一张虚拟表，说是虚拟表但是其实也是表，</span><strong><span>既然是表的话就要符合表的规范，也就是表里面是不能出现同名字段！还需要注意的就是，视图本身是没有数据的，是临时执行 select 语句得到的对应的结果。</span></strong></p><p><span>同时，关于一些对表的操作对于视图来说也同样适用，主要是查询操作（show tables、show create table/view、desc 视图名）。</span></p><h4><a name="1-创建视图" class="md-header-anchor"></a><span>1. 创建视图</span></h4><p><span>创建视图基本语法：</span><strong><code>create view 视图名 as select语句</code></strong></p><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- select语句既可以是单表数据，也可以是连接查询、联合查询或者子查询，反正只要是查询语句即可</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 这里要注意视图当中不能出现同名字段，通过起别名来避免</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">VIEW</span> v_student_class <span class="cm-keyword">AS</span> <span class="cm-keyword">SELECT</span> s.*, c<span class="cm-variable-2">.name</span> <span class="cm-keyword">AS</span> class_name <span class="cm-keyword">FROM</span> t_student <span class="cm-keyword">AS</span> s, t_class <span class="cm-keyword">AS</span> c <span class="cm-keyword">WHERE</span> s<span class="cm-variable-2">.class_id</span>=c<span class="cm-variable-2">.id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.02</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">tables</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Tables_in_test  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| t_class &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| t_student &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| v_student_class |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><h4><a name="2-使用视图" class="md-header-anchor"></a><span>2. 使用视图</span></h4><p><span>基本语法：</span><strong><code>select 字段列表 from 视图名 [子句]</code></strong><span>。</span></p><h4><a name="3-修改视图" class="md-header-anchor"></a><span>3. 修改视图</span></h4><p><span>修改视图名：</span><strong><code>rename table 旧视图名 to 新视图名</code></strong></p><p><span>修改查询语句：</span><strong><code>alter view 视图名 as 新语句</code></strong></p><h4><a name="4-删除视图" class="md-header-anchor"></a><span>4. 删除视图</span></h4><p><span>删除视图基本语法：</span><strong><code>drop view 视图名</code></strong></p><h3><a name="十四）事务安全" class="md-header-anchor"></a><span>（十四）事务安全</span></h3><p><span>事务由事务开始和事务结束之间的所有操作组成，只有所有操作都成功最终才会成功，否则不会所有操作都会失效。</span></p><p><span>基本原理：MySQL 允许将事务统一进行管理（InnoDB 存储引擎），将用户所做的操作暂时保存起来，不直接放到数据表（更新），等到用于确认结果之后再进行操作。在底层就是 SQL 指令发送到执行器执行之后会将结果保存到事务操作日志，如果所有的 SQL 指令都成功执行后客户端会发送事务处理指令，这时候执行器才会将结果同步到数据存储单元。</span></p><p><span>事务通常分为手动事务和自动事务。</span></p><h4><a name="1-自动事务auto-commit）" class="md-header-anchor"></a><span>1. 自动事务（auto commit）</span></h4><p><span>客户端发送一条 SQL 语句（主要是增、删、改操作）给服务器的时候，服务器在执行之后不等待用户反馈就会自动将结果同步到数据表。</span></p><p><span>自动事务其实是系统做了额外的步骤来帮助用户的操作，系统是通过变量来控制的，这个变量是 autocommit。</span></p><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'autocommit'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">autocommit</span> &nbsp;  | <span class="cm-keyword">ON</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">set</span> <span class="cm-keyword">autocommit</span>=off;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'autocommit'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">autocommit</span> &nbsp;  | OFF &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 当 autocommit 设置为 off 之后需要手动进行提交，也就是执行 commit 操作，如果想要放弃所有的操作的话就使用 rollback 即可。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 需要注意的是，commit 和 rollback 都会导致日志被清空，所以执行 commit 之后执行 rollback 的话，rollback 并不会生效。</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 529px;"></div><div class="CodeMirror-gutters" style="display: none; height: 529px;"></div></div></div></pre><p><img src='./Resources/MySQL_Resources/事务.png' alt='事务' referrerPolicy='no-referrer' /></p><p><span>从上图可以看到，即使设置 autocommit=false，在当前客户端仍然能够看到插入的数据，这是因为客户端在进行数据查看的时候会利用事务日志中保存的结果对数据进行加工。</span></p><h4><a name="2-手动事务" class="md-header-anchor"></a><span>2. 手动事务</span></h4><p><span>手动事务就是不管开始还是结束事务都需要用户手动发送事务操作来实现。</span></p><p><span>手动事务的命令：</span></p><ol start='' ><li><strong><code>start transaction;</code></strong><span>，开启事务，还有 </span><code>begin transaction</code><span>，不过 MySQL 不支持这种写法。</span></li><li><strong><code>增、删、改</code></strong><span>，可以由多条 SQL 指令组成。</span></li><li><strong><code>commit/rollback</code></strong><span>，事务提交。</span></li></ol><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 开始事务</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">start</span> <span class="cm-keyword">transaction</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 插入班级</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_class <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'六班'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 插入学生到新的班级</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t_student <span class="cm-keyword">values</span>(<span class="cm-atom">null</span>, <span class="cm-string">'小九'</span>, <span class="cm-number">6</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t_student;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id | name | class_id |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">1</span> | 张三 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">2</span> | 王五 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">3</span> | 赵六 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">4</span> | 黄七 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">5</span> | 张三 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">6</span> | 王五 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">7</span> | 赵六 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">8</span> | 黄七 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">9</span> | 小九 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">9</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 回滚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">rollback</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 班级没有了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t_class;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id | name |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">1</span> | 一班 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">2</span> | 二班 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">3</span> | 三班 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">4</span> | 四班 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">5</span> | 五班 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 学生也没有了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t_student;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id | name | class_id |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">1</span> | 张三 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">2</span> | 王五 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">3</span> | 赵六 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">4</span> | 黄七 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">5</span> | 张三 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">6</span> | 王五 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">7</span> | 赵六 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">8</span> | 黄七 | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----+------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">8</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1380px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1380px;"></div></div></div></pre><h5><a name="21-回滚点" class="md-header-anchor"></a><span>2.1 回滚点 </span></h5><p><span>通常情况来说，如果步骤很多，则没有必要执行错一步就所有的步骤都重来。这个时候可以设置回滚点，来使得我们回滚到上次设置回滚点的地方。</span></p><p><strong><span>增加回滚点</span></strong></p><p><span>基本语法：</span><strong><code>savepoint 回滚点名字</code></strong><span>，数字、字母和下划线组成。</span></p><p><strong><span>回到回滚点</span></strong></p><p><span>基本语法：</span><strong><code>rollback to 回滚点名字;</code></strong><span>，执行成功后在此回滚点之后的所有操作都会被丢弃。</span></p><h3><a name="十五）变量" class="md-header-anchor"></a><span>（十五）变量</span></h3><p><span>MySQL 中变量分为三种：系统变量、会话变量、局部变量。</span></p><h4><a name="1-系统变量" class="md-header-anchor"></a><span>1. 系统变量</span></h4><p><span>通过 select 查看</span><strong><span>具体变量的实际的值</span></strong><span>：</span><strong><code>select @@变量名;</code></strong><span>，其中 </span><code>@@</code><span> 表示系统变量。这种查询方式必须要制导系统变量的全名才可以使用。</span></p><p><span>修改系统变量有两种方式：</span></p><ol start='' ><li><span>局部修改（会话级别，针对当前客户端当次连接有效）：</span><strong><code>set 变量名=新值</code></strong><span>。</span></li><li><span>全局修改（针对所有客户端，“所有时刻”都有效）：</span><strong><code>set global 变量名=新值;</code></strong><span> || </span><strong><code>set @@global.变量名=新值;</code></strong><span>。</span><strong><span>非常需要注意的就是全局修改针对的是新客户端才会生效，已经连接的客户端并不会生效，如果想要本次连接也能生效的话需要使用局部修改才行</span></strong><span>。</span></li></ol><h4><a name="2-会话变量" class="md-header-anchor"></a><span>2. 会话变量</span></h4><p><span>会话变量只对当前用户使用的客户端当次登录生效，当关闭了当前客户端再次登录就没有这个会话变量了。会话变量也称之为用户变量。</span></p><p><span>基本语法：</span><strong><code>set @变量名 = 值</code></strong><span>。注意，在 MySQL 中没有比较符号“==”，所以是使用“=”代替“==”，赋值则用“:=”。所以：</span><strong><code>set @变量名 := 值</code></strong><span>。</span></p><p><span>MySQL 支持将查询到的数据存储到变量中，查询到的数据只能是一行数据，其中一个变量对应一个字段。有两种方法：</span></p><ol start='' ><li><span>赋值且查看赋值过程：</span><strong><code>select @变量1 := 字段1, @变量2 := 字段2[ ,...] from 数据表 where 条件;</code></strong></li><li><span>赋值但不看赋值过程：</span><strong><code>select 字段1, 字段2[, ...] from 数据表 where 条件 into @变量1, @变量2[, ...];</code></strong></li></ol><p><span>其中第1点一定要注意使用的是“:=”而不是“=”，就如前面所说，如果使用“=”的话会被当做比较运算。另外，第1点还需要使用 </span><code>limit 1</code><span> 来限制查询出来的数据的条数。</span></p><p><span>实例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-variable-2">@name</span> := stu_name, <span class="cm-variable-2">@age</span> := stu_age <span class="cm-keyword">from</span> my_student <span class="cm-keyword">limit</span> <span class="cm-number">1</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> stu_name, stu_age <span class="cm-keyword">from</span> my_student <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> stu_height <span class="cm-keyword">desc</span> <span class="cm-keyword">limit</span> <span class="cm-number">1</span> <span class="cm-keyword">into</span> <span class="cm-variable-2">@name</span>, <span class="cm-variable-2">@age</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@name</span>:=<span class="cm-variable-2">`name`</span>, <span class="cm-variable-2">@login_name</span>:=<span class="cm-variable-2">`login_name`</span> <span class="cm-keyword">from</span> <span class="cm-variable-2">`sys_user`</span> <span class="cm-keyword">where</span> <span class="cm-variable-2">`login_flag`</span>=<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@name</span>:=<span class="cm-variable-2">`name`</span> | <span class="cm-variable-2">@login_name</span>:=<span class="cm-variable-2">`login_name`</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 田科 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13320259365</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 王寒琛 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13996332160</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 李杰 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15823796551</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 侯超 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18883181519</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 李丹丹 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15823873987</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 刘紫阳 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">17738116001</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 龙江敏 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15121682939</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 罗科宇 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">19122289266</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 车建霖 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18785271103</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 刘梦荻 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13097321271</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 黄柯杰 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18384844768</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 何其睿 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15223125915</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 陈滑维 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18840925299</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 慕之勇 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">17728650193</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 刘贺勇 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">17711805095</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 钟昌明 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15215151290</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 钟飞飞 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13896403368</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 文爽 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18723408175</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 李彬彬 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18723961283</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 龙江敏 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">20190230100948</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 赵思奇 &nbsp; &nbsp; &nbsp;  | zsq &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 赵思奇 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18375753115</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 谭云燕 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13110287062</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 田洁 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13110287517</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 阳明桃 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18372551829</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">17695404311</span> &nbsp; | <span class="cm-number">17695404311</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 李佩灵 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18166328763</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 肖艳 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13637951175</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 唐江湖 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15223838680</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 简杰铭 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">2002019017</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 于文琦 &nbsp; &nbsp; &nbsp;  | yuwenqi1996 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 梁佳卉 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13618597297</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 平易 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15223565802</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 刘露 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13678467841</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 唐家平 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15736040565</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 周林艺 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18523802206</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 陈理丹 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15215013769</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 吴昊 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15111960575</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 陈小平 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">150234011110</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 魏青松 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15123575376</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 陆美伊 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">522122199504201622</span> &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 杨荣培 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18716255700</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 刘梦荻 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15969553960</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 王榆君 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">17830656508</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 唐小林 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18602302084</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 胡康 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">18099979816</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 周林艺 &nbsp; &nbsp; &nbsp;  | joolimye &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 魏金刚 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">17774968107</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 刘乙竑 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">17729605095</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 吴妍霖 &nbsp; &nbsp; &nbsp;  | <span class="cm-number">15347006856</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 罗伟 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13388918722</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">51</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">2</span> <span class="cm-keyword">warnings</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@name</span>, <span class="cm-variable-2">@login_name</span>;<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 在这里可以看到其实只有最后一条数据的内容被保留了下来</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@name</span> | <span class="cm-variable-2">@login_name</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 罗伟  | <span class="cm-number">13388918722</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@name</span>:=<span class="cm-variable-2">`name`</span>, <span class="cm-variable-2">@login_name</span>:=<span class="cm-variable-2">`login_name`</span> <span class="cm-keyword">from</span> <span class="cm-variable-2">`sys_user`</span> <span class="cm-keyword">where</span> <span class="cm-variable-2">`login_flag`</span>=<span class="cm-number">0</span> <span class="cm-keyword">limit</span> <span class="cm-number">1</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 所以需要 limit 来限制查询出来的数据只有一条</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@name</span>:=<span class="cm-variable-2">`name`</span> | <span class="cm-variable-2">@login_name</span>:=<span class="cm-variable-2">`login_name`</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 田科 &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">13320259365</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">2</span> <span class="cm-keyword">warnings</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@name</span>, <span class="cm-variable-2">@login_name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@name</span> | <span class="cm-variable-2">@login_name</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| 田科  | <span class="cm-number">13320259365</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2024px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2024px;"></div></div></div></pre><h4><a name="3-局部变量" class="md-header-anchor"></a><span>3. 局部变量</span></h4><p><span>作用范围在 </span><code>begin</code><span> 与 </span><code>end</code><span> 语句块之间，这经常出现在大型语句块中，包括函数、存储过程、触发器。在该语句块里使用 </span><code>declare</code><span> 来定义局部变量。</span></p><p><span>声明语法：</span><strong><code>declare 变量名 数据类型 [属性];</code></strong><span>。</span></p><h4><a name="4-作用域" class="md-header-anchor"></a><span>4. 作用域</span></h4><p><strong><span>局部作用域</span></strong><span>：使用 </span><code>declare</code><span> 关键字声明的变量（在结构体内：函数、存储过程、触发器）具有的作用域就是局部作用域，只能在结构体内声明和使用。</span></p><p><strong><span>会话作用域</span></strong><span>：使用 @ 符号定义的变量，使用 </span><code>set</code><span> 关键字定义。在当前用户当次连接有效，只要是本次连接，任何数据库都可以使用，在结构体内同样可以使用。</span></p><p><strong><span>全局作用域</span></strong><span>：所有的客户端所有的连接都可以使用。</span></p><h3><a name="十六）流程结构" class="md-header-anchor"></a><span>（十六）流程结构</span></h3><h4><a name="1-if" class="md-header-anchor"></a><span>1. if</span></h4><p><span>有两种情况：</span></p><ol start='' ><li><p><span>用在 </span><code>select</code><span> 中，当作条件进行判断（感觉好像是相当于一个函数）：</span></p><ol start='' ><li><span>基本语法：</span><strong><code>if(条件, 为真结果, 为假结果)</code></strong><span>。</span></li></ol></li><li><p><span>用在复杂的语句块中（函数、存储过程、触发器）：</span></p><ol start='' ><li><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> 条件 <span class="cm-keyword">then</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>满足条件要执行的语句;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 或者如下</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> 条件 <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>满足条件要执行的语句;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>不满足条件要执行的语句;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 没有 else if，也没有 elif，如果还要细分的话就需要重复 if then else end if。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre></li></ol></li></ol><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> *, <span class="cm-keyword">if</span>(<span class="cm-variable-2">`stu_age`</span>&gt;=<span class="cm-number">18</span>, <span class="cm-string">'已成年'</span>, <span class="cm-string">'未成年'</span>) <span class="cm-keyword">as</span> <span class="cm-variable-2">`是否成年`</span> <span class="cm-keyword">from</span> my_student;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- --------------------------------------------------------------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> *, <span class="cm-keyword">if</span>(<span class="cm-variable-2">`del_flag`</span>=<span class="cm-number">0</span>, <span class="cm-string">'未删除'</span>, <span class="cm-string">'已删除'</span>) <span class="cm-keyword">as</span> <span class="cm-variable-2">`is_deleted`</span> <span class="cm-keyword">from</span> <span class="cm-variable-2">`sys_user`</span> <span class="cm-keyword">where</span> <span class="cm-builtin">date</span>(<span class="cm-variable-2">`create_date`</span>)&gt;=<span class="cm-string">'2019-09-05'</span> <span class="cm-keyword">and</span> <span class="cm-variable-2">`login_flag`</span>=<span class="cm-number">1</span> <span class="cm-keyword">and</span> <span class="cm-variable-2">`login_date`</span>&gt;=<span class="cm-string">'2019-09-06'</span><span class="cm-variable-2">\G</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">*************************** <span class="cm-number">1.</span> <span class="cm-keyword">row</span> ***************************</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: <span class="cm-number">268</span>c371667b64324a050d3256afa6688</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; company_id: <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  office_id: <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; login_name: <span class="cm-number">15640366501</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">password</span>: <span class="cm-number">314</span>ac76ab1d6c1e7fdbe7444701f63307825bd4582f003b4444fd2f0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">no</span>: <span class="cm-number">15640366501</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name: 吴昊</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  email: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  phone: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; mobile: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  user_type: <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  photo: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; login_ip: <span class="cm-number">175.167.154.153</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; login_date: <span class="cm-number">2019</span>-<span class="cm-number">09</span>-<span class="cm-number">06</span> <span class="cm-number">00</span>:12:32</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; login_flag: <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  create_by: <span class="cm-number">268</span>c371667b64324a050d3256afa6688</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  create_date: <span class="cm-number">2019</span>-<span class="cm-number">09</span>-<span class="cm-number">05</span> <span class="cm-number">15</span>:50:05</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  update_by: <span class="cm-number">268</span>c371667b64324a050d3256afa6688</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  update_date: <span class="cm-number">2019</span>-<span class="cm-number">09</span>-<span class="cm-number">05</span> <span class="cm-number">15</span>:50:05</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  remarks: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; del_flag: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  lock_flag: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  expire_date: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  certificateID: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">certificateType: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  sex: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; birthday: <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; is_deleted: 未删除</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 828px;"></div><div class="CodeMirror-gutters" style="display: none; height: 828px;"></div></div></div></pre><h4><a name="2-while" class="md-header-anchor"></a><span>2. while</span></h4><p><span>基本语法：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">while</span> 条件 <span class="cm-keyword">do</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>要循环执行的代码;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">while</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>结构标识符：为某些特定的结构进行命名，然后为的是在某些地方来使用。基本语法如下：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">标识名字: <span class="cm-keyword">while</span> 条件 <span class="cm-keyword">do</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>要循环执行的代码;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">while</span> [标识名字];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>在 MySQL 中没有 break 和 continue，但是有自己的关键字替代：</span><code>iterate</code><span> 和 </span><code>leave</code><span>，相当于 continue 和 break。基本使用如下：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">标识名字: <span class="cm-keyword">while</span> 条件 <span class="cm-keyword">do</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> 条件判断 <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>循环控制;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>iterator/leave 标识名字;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>循环体;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">while</span> [标识名字];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3><a name="十七）函数" class="md-header-anchor"></a><span>（十七）函数</span></h3><p><span>在 MySQL 中函数分为系统函数（内置函数）和自定义函数。</span></p><h4><a name="1-内置函数" class="md-header-anchor"></a><span>1. 内置函数</span></h4><h5><a name="11-字符串函数" class="md-header-anchor"></a><span>1.1 字符串函数</span></h5><p><span>字符串的开始位置为1，而非0。</span></p><ol start='' ><li><span>char_length(字符串)：返回字符串的字符数。</span></li><li><span>length(字符串)：返回字符串的字节数（和使用到的字符集相关，UTF-8 一个字符3个字节，GBK 一个字符2个字节）。</span></li><li><span>concat(字符串1, 字符串2[, ...])：将多个字符串拼接起来。</span></li><li><span>instr(字符串1, 字符串2)：判断字符串2在字符串1的位置，如果字符串1没有包含字符串2，则返回0。</span></li><li><span>lcase/lower(字符串)：将字符串全部转换为小写字符。</span></li><li><span>ucase/upper(字符串)：将字符串全部转换为大写字符。</span></li><li><span>left(字符串, 长度)：将字符串从最左边开始截取，截取指定长度的子字符串。如果指定的长度超过字符串长度，那么就会截取所有。</span></li><li><span>right(字符串, 长度)：将字符串从最右边开始截取，截取指定长度的子字符串。如果指定的长度超过字符串长度，那么就会截取所有。</span></li><li><span>mid/substr(字符串, 起始位置[, 长度])：从起始位置截取指定长度的字符串，如果没有指定长度，则会从起始位置截取到最后。例如：</span><code>select substr(&#39;structured query language&#39;, 12, 5);</code><span>。</span></li><li><span>ltrim(字符串)：将字符串左边所有的空格（不是空白，制表符就不会被去掉）去掉。</span></li><li><span>rtrim(字符串)：将字符串右边所有的空格（不是空白，制表符就不会被去掉）去掉。</span></li><li><span>trim(字符串)：将字符串左右两侧所有空格去掉。</span></li></ol><h5><a name="12-时间函数" class="md-header-anchor"></a><span>1.2 时间函数</span></h5><p><span>日期时间都是使用字符串格式。</span></p><ol start='' ><li><p><span>now/sysdate()：返回当前的时间（日期 时间，yyyy-MM-dd HH:mm:ss）。</span></p></li><li><p><span>curdate/current_date()：返回当前日期。</span></p></li><li><p><span>curtime/current_time()：返回当前时间。</span></p></li><li><p><span>datediff(日期1, 日期2)：判断两个日期之间的天数差距，就是日期2减日期1。</span></p></li><li><p><span>date_add(日期, interval n type)：将日期进行指定时间的相加后得到的日期，其中的 type 可以为 year、week、day、hour、minute、second 等</span></p></li><li><p><span>unix_timestamp()：获取时间戳，是一串数字。</span></p></li><li><p><span>current_timestamp()：获取当前时间戳，是日期时间字符串，和时区有关。</span></p></li><li><p><span>from_unixtime(时间戳)：将时间戳转换为对应的日期，例如：</span><code>select from_unixtime(1569139926);</code><span>。</span></p></li><li><p><span>获取时间日期对应部分的函数：</span></p><ol start='' ><li><span>date(日期时间)：获取参数的日期部分。</span></li><li><span>time(日期时间)：获取参数的时间部分。</span></li><li><span>year(日期时间)：获取参数的年。</span></li><li><span>month(日期时间)：获取参数的月。</span></li><li><span>day(日期时间)：获取参数的日。</span></li><li><span>hour(日期时间)：获取参数的时。</span></li><li><span>minute(日期时间)：获取参数的分。</span></li><li><span>second(日期时间)：获取参数的秒。</span></li><li><span>dayofyear(日期时间)：返回一年当中的某一天（1~366）。</span></li><li><span>dayofmonth(日期时间)：返回一月当中的某一天（1~31）。</span></li><li><span>dayofweek(日期时间)：返回一周当中的某一天（1~7，1表示周日，7表示周六）。</span></li><li><span>weekofyear/week(日期时间)：返回日期对应的星期在一年当中的（1~53）。</span></li><li><span>dayname(日期时间)：返回星期，例如：Sunday。</span></li><li><span>monthname(日期时间)：返回月份，例如：January。</span></li><li><span>weekday(日期时间)：返回星期值（0~6，0代表周一，6代表周日）。</span></li></ol></li></ol><h5><a name="13-数学函数" class="md-header-anchor"></a><span>1.3 数学函数</span></h5><ol start='' ><li><span>abs(数字)：绝对值。</span></li><li><span>ceiling(数字)：向上取整。</span></li><li><span>floor(数字)：向下取整。</span></li><li><span>pow(数字1, 数字2)：求数字1的数字2次方。</span></li><li><span>rand()：获取随机数（0~1）。</span></li><li><span>round(数字)：四舍五入。</span></li></ol><h5><a name="14-其他函数" class="md-header-anchor"></a><span>1.4 其他函数</span></h5><ol start='' ><li><span>md5()：对数据进行 MD5 加密（MySQL 中使用 md5() 加密之后得到的内容和其他地方通过 MD5 算法得到的内容是完全相同的）。</span></li><li><span>version()：获取版本号。</span></li><li><span>database()：显示当前所在的数据库。</span></li><li><span>uuid()：生成一个唯一标识符（整库唯一）。</span></li></ol><h4><a name="2-自定义函数" class="md-header-anchor"></a><span>2. 自定义函数</span></h4><p><span>自定义函数属于用户级别，只有当前用户在当前客户端可以使用。</span></p><p><span>函数因为必须规范返回值，那么在函数内部就不能使用 </span><code>select</code><span>，因为 </span><code>select</code><span> 一旦执行就会得到一个结果（result set），不过有种情况可以使用 </span><code>select</code><span>：</span><code>select 字段 into @变量;</code><span>（唯一可用）。</span></p><h5><a name="21-创建函数" class="md-header-anchor"></a><span>2.1 创建函数</span></h5><p><span>函数定义基本流程：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> $$<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 临时修改结束符</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> funciton 函数名(形参...) <span class="cm-keyword">returns</span> 返回值类型<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 形参格式：字段名 数据类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 函数体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> 返回值数据;<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 必须与返回值类型一致</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>$$</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 将结束符改回去</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- --------------------------------------------------------------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- begin 和 end 在只有一条语句的情况下可以省略，下面是最简函数：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">function</span> func <span class="cm-keyword">returns</span> <span class="cm-builtin">int</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-number">7</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><h5><a name="22-查看函数" class="md-header-anchor"></a><span>2.2 查看函数</span></h5><p><span>基本语法：</span><strong><code>show function status[ like &#39;匹配模式&#39;];</code></strong><span>，查看中的“Db”一列表示当前函数只能在对应的数据库中使用。</span></p><p><span>查看创建：</span><strong><code>show create funtion 函数名;</code></strong><span>。</span></p><h5><a name="23-调用函数" class="md-header-anchor"></a><span>2.3 调用函数</span></h5><p><span>和调用内置函数是一样的：</span><strong><code>select 函数名(实参列表);</code></strong><span>。</span></p><h5><a name="24-删除函数" class="md-header-anchor"></a><span>2.4 删除函数</span></h5><p><span>基本语法：</span><strong><code>drop function 函数名;</code></strong><span>。</span></p><h5><a name="25-流程结构与函数" class="md-header-anchor"></a><span>2.5 流程结构与函数</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 修改默认的结束符，在书写注释的时候一定不要将注释写在 # 的后面</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> <span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">function</span> my_add(begin_value <span class="cm-builtin">int</span>, end_value <span class="cm-builtin">int</span>) <span class="cm-keyword">returns</span> <span class="cm-builtin">int</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> add_index <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> begin_value;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> add_result <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>sum_loop:while add_index&lt;=end_value <span class="cm-keyword">do</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 如果当前所加的值为5的倍数的话就需要跳过当前值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> add_index%<span class="cm-number">5</span>=<span class="cm-number">0</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> add_index := add_index+<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">iterate</span> sum_loop;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> add_result := add_result+add_index;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> add_index := add_index+<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 这里的 sum_loop 可以不用写</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">while</span> sum_loop;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 一定要返回结果</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> add_result;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 函数定义完之后需要结束符来结束，之前已经将结束符修改了，需要用修改之后的结束符</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 将修改过的结束符修改回原来的结束符</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 621px;"></div><div class="CodeMirror-gutters" style="display: none; height: 621px;"></div></div></div></pre><p><span>上面的函数我在 8.0.16 版本试的时候提示有问题，不过在 5.7.17-log 版本试的时候是没问题的。</span></p><h3><a name="十八）存储过程" class="md-header-anchor"></a><span>（十八）存储过程</span></h3><p><span>存储过程是大型数据库中的一组为了完成特定功能的，在第一次编译之后再次使用就不需要编译的 SQL 语句集。</span></p><p><span>存储过程和函数的区别：</span></p><ol start='' ><li><span>标识符不同，存储过程为 </span><code>procedure</code><span>。</span></li><li><span>函数有返回值，过程没有返回值。</span></li><li><span>函数可以通过 </span><code>select</code><span> 调用，而过程不能。</span></li></ol><p><strong><span>在创建过程之前需要先选择数据库</span></strong><span>！</span></p><h4><a name="1-创建" class="md-header-anchor"></a><span>1. 创建</span></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> $$</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> procudure 过程名([参数列表])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>// 过程体</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$$</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><span>如果过程体只有一条语句的话，可以省略 </span><code>begin</code><span> 和 </span><code>end</code><span>。</span></p><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 最简单的过程</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> procudure my_procudure()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> <span class="cm-variable-2">`sys_user`</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 复杂一点的过程，计算前一百之和</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> &amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> my_procedure()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> i <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@sum</span> := <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> i&lt;=<span class="cm-number">100</span> <span class="cm-keyword">do</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@sum</span> := <span class="cm-variable-2">@sum</span>+i;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> i := i+<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">while</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">select</span> <span class="cm-variable-2">@sum</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 460px;"></div><div class="CodeMirror-gutters" style="display: none; height: 460px;"></div></div></div></pre><h4><a name="2-查看" class="md-header-anchor"></a><span>2. 查看</span></h4><p><span>基本语法：</span><strong><code>show procedure status[ like &#39;pattern&#39;]</code></strong><span>。</span></p><p><span>查看创建：</span><strong><code>show create procedure 过程名</code></strong><span>。</span></p><h4><a name="3-调用" class="md-header-anchor"></a><span>3. 调用</span></h4><p><span>基本语法：</span><strong><code>call 过程名([实参列表])</code></strong><span>。</span></p><h4><a name="4-删除" class="md-header-anchor"></a><span>4. 删除</span></h4><p><span>基本语法：</span><strong><code>drop procedure 过程名</code></strong><span>。</span></p><h4><a name="5-参数" class="md-header-anchor"></a><span>5. 参数</span></h4><p><span>存储过程的参数分为三种类型：</span></p><ol start='' ><li><span>in：表示参数从外部传入到过程中使用，可以是数据，也可以是保存数据的变量。</span></li><li><span>out：表示参数是从过程里面将数据保存到变量中交给外部使用的变量，传入的必须是变量，如果传入的变量本来就有值的话就回被清空为 NULL。</span></li><li><span>inout：数据可以从外部传入到过程内部使用，同时内部操作之后又会将数据返回给外部使用。</span></li></ol><p><span>基本语法：</span><strong><code>变量类型 变量名 数据类型</code></strong><span>，例如：</span><strong><code>in in_int_data int</code></strong><span>。</span></p><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 存储过程如下：</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> &amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> my_procedure(<span class="cm-keyword">in</span> int_1 <span class="cm-builtin">int</span>, <span class="cm-keyword">out</span> int_2 <span class="cm-builtin">int</span>, <span class="cm-keyword">inout</span> int_3 <span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 查看形参的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">select</span> int_1, int_2, int_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 修改三个变量的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> int_1 := <span class="cm-number">10</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> int_2 := <span class="cm-number">100</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> int_3 := <span class="cm-number">1000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 再查看形参的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">select</span> int_1, int_2, int_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 查看会话变量的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 修改会话变量的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@n1</span> := <span class="cm-string">'a'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@n2</span> := <span class="cm-string">'b'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@n3</span> := <span class="cm-string">'c'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- --------------------------------------------------------------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">delimiter</span> &amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> my_procedure(<span class="cm-keyword">in</span> int_1 <span class="cm-builtin">int</span>, <span class="cm-keyword">out</span> int_2 <span class="cm-builtin">int</span>, <span class="cm-keyword">inout</span> int_3 <span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-comment">-- 查看形参的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">select</span> int_1, int_2, int_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-comment">-- 修改三个变量的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">set</span> int_1 := <span class="cm-number">10</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">set</span> int_2 := <span class="cm-number">100</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">set</span> int_3 := <span class="cm-number">1000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-comment">-- 再查看形参的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">select</span> int_1, int_2, int_3;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-comment">-- 查看会话变量的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-comment">-- 修改会话变量的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">set</span> <span class="cm-variable-2">@n1</span> := <span class="cm-string">'a'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">set</span> <span class="cm-variable-2">@n2</span> := <span class="cm-string">'b'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">set</span> <span class="cm-variable-2">@n3</span> := <span class="cm-string">'c'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">delimiter</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 现在 n1、n2、n3 是没有值的</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@n1</span>  | <span class="cm-variable-2">@n2</span>  | <span class="cm-variable-2">@n3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-atom">NULL</span> | <span class="cm-atom">NULL</span> | <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">set</span> <span class="cm-variable-2">@n1</span>:=<span class="cm-number">1</span>, <span class="cm-variable-2">@n2</span>:=<span class="cm-number">2</span>, <span class="cm-variable-2">@n3</span>:=<span class="cm-number">3</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">-- 设置值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 现在有值了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@n1</span>  | <span class="cm-variable-2">@n2</span>  | <span class="cm-variable-2">@n3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp;<span class="cm-number">2</span> | &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">call</span> my_procedure(<span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 调用存储过程</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| int_1 | int_2 | int_3 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp;<span class="cm-atom">NULL</span> | &nbsp; &nbsp; <span class="cm-number">3</span> |<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- NULL 是因为 out 类型传进去首先就被清空为 NULL 了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| int_1 | int_2 | int_3 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp;<span class="cm-number">10</span> | &nbsp; <span class="cm-number">100</span> | &nbsp;<span class="cm-number">1000</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@n1</span>  | <span class="cm-variable-2">@n2</span>  | <span class="cm-variable-2">@n3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp;<span class="cm-number">2</span> | &nbsp; &nbsp;<span class="cm-number">3</span> |<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">-- 本来的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@n1</span>  | <span class="cm-variable-2">@n2</span>  | <span class="cm-variable-2">@n3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| a &nbsp;  | b &nbsp;  | c &nbsp;  |<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">-- 被修改后的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-variable-2">@n1</span>, <span class="cm-variable-2">@n2</span>, <span class="cm-variable-2">@n3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-variable-2">@n1</span>  | <span class="cm-variable-2">@n2</span>  | <span class="cm-variable-2">@n3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| a &nbsp;  | &nbsp;<span class="cm-number">100</span> | <span class="cm-number">1000</span> |<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">-- n1 已经被修改为了 a，过程执行完之后（end） n2 和 n3 因为是 out 和 inout 类型，所以分别被输出为了 int_2 的100和 int_3 的1000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2668px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2668px;"></div></div></div></pre><h3><a name="十九）触发器" class="md-header-anchor"></a><span>（十九）触发器</span></h3><p><span>触发器是特殊的存储过程，主要通过事件进行触发而被执行的。</span></p><p><span>作用：</span></p><ol start='' ><li><span>在将数据写入到数据表前检验数据或者强制转换数据（保证数据安全）。</span></li><li><span>触发器发生错误的话异动结果会被撤销（相当于事务）。</span></li><li><span>部分数据库管理系统可以针对 DDL 使用触发器，称为 DDL 触发器。</span></li><li><span>可依照特定的情况，替换移动的指令（instead of），但是 MySQL 不支持。</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> &amp;&amp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> 触发器名字 触发时机 触发事件 <span class="cm-keyword">on</span> 表 <span class="cm-keyword">for</span> <span class="cm-keyword">each</span> <span class="cm-keyword">row</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>// 语句</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 触发对象：on 表 for each row</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 触发时机：每一行有两种状态，数据操作前（Before）和数据操作后（After），另外还有操作前的值（old）和操作后的值（new)，但并不是所有操作都有 old 和 new，例如 insert 没有 old，delete 没有 new。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 触发事件：数据发生变化对应的操作只有写操作，也就是 insert、update、delete</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><p><strong><span>注意事项：</span></strong><span>一张表中每一个触发时机绑定的触发事件对应的触发器类型只有一个。因此，一张表中最多有6个触发器：before insert、before update、before delete、after insert、after update、after delete。</span></p><p><span>示例：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 两张表，商品表和库存表，每次订单生成，商品表中对应的库存就应该发生变化</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> &amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> after_insert_order <span class="cm-keyword">after</span> <span class="cm-keyword">insert</span> <span class="cm-keyword">on</span> t_order <span class="cm-keyword">for</span> <span class="cm-keyword">each</span> <span class="cm-keyword">row</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">update</span> t_good <span class="cm-keyword">set</span> inv := inv-new<span class="cm-variable-2">.good_number</span> <span class="cm-keyword">where</span> id = new<span class="cm-variable-2">.good_id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 但是如果生成的订单的数量大于库存数量就会有问题，需要解决</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> &amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> before_insert_order <span class="cm-keyword">before</span> <span class="cm-keyword">insert</span> <span class="cm-keyword">on</span> t_order <span class="cm-keyword">for</span> <span class="cm-keyword">each</span> <span class="cm-keyword">row</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">select</span> inv <span class="cm-keyword">from</span> t_good <span class="cm-keyword">where</span> id=new<span class="cm-variable-2">.good_id</span> <span class="cm-keyword">into</span> <span class="cm-variable-2">@inv</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-variable-2">@inv</span>&lt;new<span class="cm-variable-2">.good_number</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 执行错误的 SQL 语句即可，主动出错</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> xxx <span class="cm-keyword">values</span>(<span class="cm-string">'xxx'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&amp;&amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 506px;"></div><div class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre><h4><a name="1-查看触发器" class="md-header-anchor"></a><span>1. 查看触发器</span></h4><p><span>基本语法：</span><strong><code>show triggers</code></strong><span>。</span></p><p><span>查看创建：</span><strong><code>show create trigger 触发器名</code></strong><span>。</span></p><h4><a name="2-触发触发器" class="md-header-anchor"></a><span>2. 触发触发器</span></h4><p><span>让触发器指定的表中对应的事件发生即可触发触发器。</span></p><h4><a name="3-删除触发器" class="md-header-anchor"></a><span>3. 删除触发器</span></h4><p><span>基本语法：</span><strong><code>drop trigger 触发器名</code></strong></p><h2><a name="四运算符" class="md-header-anchor"></a><span>四、运算符</span></h2><p><span>MySQL 中共有六种运算符：</span></p><ul><li><p><span>算数运算符</span></p><ul><li><span>+、-、</span><span>*</span><span>、/、%</span></li></ul></li><li><p><span>比较运算符：&gt;、&gt;=、&lt;、&lt;=、=、&lt;&gt;、between and</span></p></li><li><p><span>逻辑运算符：and、or、not</span></p></li><li><p><span>in</span></p></li><li><p><span>is</span></p></li><li><p><span>like</span></p></li></ul><h3><a name="一）算数运算" class="md-header-anchor"></a><span>（一）算数运算</span></h3><p><span>通常不在条件（where、having）中使用，而是用于结果（select）运算。</span></p><p><strong><span>在 MySQL 中，除法的运算结果使用浮点数表示</span></strong><span>。</span></p><p><strong><span>除法中，如果被除数为0的话，结果为 NULL</span></strong><span>。</span></p><p><strong><span>NULL 进行任何算数运算结果都是 NULL</span></strong><span>。</span></p><h3><a name="二）比较运算符" class="md-header-anchor"></a><span>（二）比较运算符</span></h3><p><span>通常用来在条件中对结果进行限定的。</span></p><p><strong><span>在 MySQL 中也可以使用“&lt;=&gt;”来表示相等。虽然老师说在下面特殊应用 select 的时候，只能用“&lt;=&gt;”来判断相等，否则就真的是赋值运算了，但是我实际发现还是没问题的</span></strong><span>。</span></p><p><strong><span>比较运算符还有特殊应用：就是在结果字段中进行比较运算</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- MySQL 中没有规定 select 必须有数据表</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 下面字符串的'1'，转换为了数值1。在 MySQL 中，数据会先转换为同类型再进行比较。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-number">1</span>=<span class="cm-string">'1'</span>, <span class="cm-number">0.02</span>=<span class="cm-number">0</span>, <span class="cm-number">0.02</span>&lt;&gt;<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-number">1</span>&lt;=&gt;<span class="cm-string">'1'</span>, <span class="cm-number">0.02</span>&lt;=&gt;<span class="cm-number">0</span>, <span class="cm-number">0.02</span>&lt;&gt;<span class="cm-number">0</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>另外，</span><strong><span>MySQL 中是没有布尔类型的，会用0代表false，1代表true</span></strong><span>。</span></p><p><span>在进行条件判断的时候，可以比较区间：</span></p><p><span>基本语法：</span><strong><span>between 条件1 and 条件2</span></strong><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> stu_age <span class="cm-keyword">between</span> <span class="cm-number">20</span> <span class="cm-keyword">and</span> <span class="cm-number">30</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>注意：</span></p><ul><li><span>闭区间，也就是会包含条件1和条件2。</span></li><li><span>条件1必须小于条件2。</span></li></ul><h3><a name="三）逻辑运算符" class="md-header-anchor"></a><span>（三）逻辑运算符</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> stu_age&gt;=<span class="cm-number">20</span> <span class="cm-keyword">and</span> stu_age&lt;=<span class="cm-number">30</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3><a name="四）in" class="md-header-anchor"></a><span>（四）in</span></h3><p><span>当结果是一个值的时候可以用“=”，而当结果是一个结果集的时候就可以使用 in 了。</span></p><p><span>基本语法：</span><strong><span>in (结果1, 结果2, 结果3...)</span></strong><span>，只要结果再结果集中出现过就成立。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> stu_id <span class="cm-keyword">in</span> (<span class="cm-string">'stu0001'</span>, <span class="cm-string">'stu0004'</span>, <span class="cm-string">'stu0009'</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3><a name="五）is" class="md-header-anchor"></a><span>（五）is</span></h3><p><span>is 专门用来判断字段是否为 NULL。</span></p><p><span>基本语法：</span><strong><span>is null|not null</span></strong><span>，is null 判断是否为 NULL，is not null 判断是否不为 NULL。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar <span class="cm-keyword">is</span> <span class="cm-atom">null</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> my_student <span class="cm-keyword">where</span> gendar <span class="cm-keyword">is</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3><a name="六）like" class="md-header-anchor"></a><span>（六）like</span></h3><p><span>模糊匹配。</span></p><p><span>基本语法：</span><strong><span>like 匹配模式</span></strong><span>。</span></p><p><span>匹配模式有两种占位符：</span></p><ul><li><span>_：匹配一个任意字符。</span></li><li><span>%：匹配零个或多个任意字符。</span></li></ul><h2><a name="五工作学习" class="md-header-anchor"></a><span>五、工作学习</span></h2><h3><a name="一）" class="md-header-anchor"></a><span>（一）</span></h3><p><span>错误：You can&#39;t specify target table &#39;table_name&#39; for update in FROM clause</span></p><p><span>解决：多嵌套一层子查询之后再进行删除</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 原来的</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> capa_wzsb_jbxx <span class="cm-keyword">where</span> name <span class="cm-keyword">in</span> (<span class="cm-keyword">select</span> name <span class="cm-keyword">from</span> capa_wzsb_jbxx <span class="cm-keyword">where</span> name <span class="cm-keyword">like</span> <span class="cm-string">'测试物品%'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 改正的</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> capa_wzsb_jbxx <span class="cm-keyword">where</span> name <span class="cm-keyword">in</span> (<span class="cm-keyword">select</span> name <span class="cm-keyword">from</span> (<span class="cm-keyword">select</span> name <span class="cm-keyword">from</span> capa_wzsb_jbxx <span class="cm-keyword">where</span> name <span class="cm-keyword">like</span> <span class="cm-string">'测试物品%'</span>) temp);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 另外还可以使用临时表来解决这个问题，先创建临时表，使用完之后就删除这张表</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><span>参考：</span><a href='https://zhidao.baidu.com/question/68619324.html'><span>百度知道</span></a></p><h3><a name="二）mysql80-连接注意事项" class="md-header-anchor"></a><span>（二）MySQL8.0 连接注意事项</span></h3><p><span>MySQL8.0 要注意的是：</span></p><ol start='' ><li><span>MySQL 的连接器要使用对应版本的连接器</span></li><li><code>dbInfo.driver=com.mysql.cj.jdbc.Driver</code></li><li><code>dbInfo.url=jdbc:mysql://localhost:3306/cbms?useUnicode=true&amp;charsetEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC</code></li></ol><h3><a name="三）mysql-导入数据要注意的事项" class="md-header-anchor"></a><span>（三）MySQL 导入数据要注意的事项</span></h3><p><span>MySQL 在使用自带的命令窗口用 </span><code>source</code><span> 命令导入 sql 文件的时候需要设置字符集，因为默认字符集如下：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%character_set%'</span>;<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 最主要是看 client、connection、results</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-keyword">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_client &nbsp; &nbsp; | gbk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_connection | gbk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_database &nbsp; | utf8mb4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_filesystem | <span class="cm-keyword">binary</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_results &nbsp;  | gbk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_server &nbsp; &nbsp; | utf8mb4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_system &nbsp; &nbsp; | utf8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_sets_dir &nbsp; &nbsp; &nbsp; | C:<span class="cm-variable-2">\P</span>rogram Files<span class="cm-variable-2">\M</span>ySQL<span class="cm-variable-2">\M</span>ySQL <span class="cm-keyword">Server</span> <span class="cm-number">8.0</span><span class="cm-variable-2">\s</span>hare<span class="cm-variable-2">\c</span>harsets\ |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">8</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">set</span> names utf8;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%character_set%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-keyword">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_client &nbsp; &nbsp; | utf8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_connection | utf8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_database &nbsp; | utf8mb4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_filesystem | <span class="cm-keyword">binary</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_results &nbsp;  | utf8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_server &nbsp; &nbsp; | utf8mb4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_set_system &nbsp; &nbsp; | utf8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| character_sets_dir &nbsp; &nbsp; &nbsp; | C:<span class="cm-variable-2">\P</span>rogram Files<span class="cm-variable-2">\M</span>ySQL<span class="cm-variable-2">\M</span>ySQL <span class="cm-keyword">Server</span> <span class="cm-number">8.0</span><span class="cm-variable-2">\s</span>hare<span class="cm-variable-2">\c</span>harsets\ |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">8</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 736px;"></div><div class="CodeMirror-gutters" style="display: none; height: 736px;"></div></div></div></pre><h3><a name="四）-语句-" class="md-header-anchor"></a><span>（四）/*! 语句 */</span></h3></div>
</body>
</html>